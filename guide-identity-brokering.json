{"sections":[{"html":"<table class=\"table-wrapper\">\n    <tr>\n        <td>Description</td>\n        <td>Learn about identity brokering/federation and how to add an external identity provider to authenticate your users.</td>\n    </tr>\n    <tr>\n        <td>Learning Outcomes</td>\n        <td>\n            In this module you will: \n            <ul>\n                <li>Learn about Identity Providers</li>\n                <li>Add a new identity provider</li>\n                <li>Example with Google Login</li>\n            </ul>\n        </td>\n    </tr>\n     <tr>\n        <td>Prerequisites</td>\n        <td>\n            <ul>\n                <li>Knowledge of <a href=\"/zitadel-organizations\">ZITADEL Organizations</a></li>\n            </ul>\n        </td>\n    </tr>\n</table>\n\n\n\t\t\t\t\t<h3>\n\t\t\t\t\t\t<span id=\"What_is_Identity_Brokering_and_Federated_Identities\" class=\"offset-anchor\" ></span>\n\t\t\t\t\t\t<a href=\"guide-identity-brokering#What_is_Identity_Brokering_and_Federated_Identities\" class=\"anchor\" aria-hidden=\"true\"><i class=\"las la-link\"></i></a>\n\t\t\t\t\t\tWhat is Identity Brokering and Federated Identities?\n\t\t\t\t\t</h3><p>Federated identity management is an arrangement built upon the trust between two or more domains. Users of these domains are allowed to access applications and services using the same identity.\nThis identity is known as federated identity and the pattern behind this as identity federation.</p>\n<p>A service provider that specializes in brokering access control between multiple service providers (also referred to as relying parties) is called identity broker.\nFederated identity management is an arrangement that is made between two or more such identity brokers across organizations.</p>\n<p>Example:\nIf Google is configured as identity provider on your organization, the user will get the option to use his Google Account on the Login Screen of ZITADEL (1).\nZITADEL will redirect the user to the login screen of Google where he as to authenticated himself (2) and is sent back after he has finished that (3). \nBecause Google is registered as trusted identity provider the user will be able to login in with the Google account after he linked an existing ZITADEL Account or just registered a new one with the claims provided by Google (4)(5).</p>\n<figure itemprop=\"associatedMedia\" itemscope itemtype=\"http://schema.org/ImageObject\">\n    <a href=\"img/zitadel_identity_brokering.png\" itemprop=\"contentUrl\" data-size=\"1920x1080\">\n        <img src=\"img/zitadel_identity_brokering.png\" itemprop=\"thumbnail\" alt=\"Zitadel Identity Brokering\" />\n    </a>\n    <figcaption itemprop=\"caption description\">Identity Brokering</figcaption>\n</figure>\n\n\n\t\t\t\t\t<h3>\n\t\t\t\t\t\t<span id=\"Exercise_Register_an_external_identity_provider\" class=\"offset-anchor\" ></span>\n\t\t\t\t\t\t<a href=\"guide-identity-brokering#Exercise_Register_an_external_identity_provider\" class=\"anchor\" aria-hidden=\"true\"><i class=\"las la-link\"></i></a>\n\t\t\t\t\t\tExercise: Register an external identity provider\n\t\t\t\t\t</h3><p>In this exercise we will add a new Google identity provider to federate identities with ZITADEL. </p>\n\n\t\t\t\t\t<h4>\n\t\t\t\t\t\t<span id=\"1_Create_new_OIDC_Client\" class=\"offset-anchor\" ></span>\n\t\t\t\t\t\t<a href=\"guide-identity-brokering#1_Create_new_OIDC_Client\" class=\"anchor\" aria-hidden=\"true\"><i class=\"las la-link\"></i></a>\n\t\t\t\t\t\t1. Create new OIDC Client\n\t\t\t\t\t</h4><ol>\n<li>Register an OIDC Client in your preferred provider</li>\n<li>Make sure you add the ZITADEL callback redirect uris\n<a href=\"https://accounts.zitadel.ch/register/externalidp/callback\" target=\"_blank\" title=\"undefined\">https://accounts.zitadel.ch/register/externalidp/callback</a>\n<a href=\"https://accounts.zitadel.ch/login/externalidp/callback\" target=\"_blank\" title=\"undefined\">https://accounts.zitadel.ch/login/externalidp/callback</a></li>\n</ol>\n<blockquote>\n<p><strong>Information:</strong> Make sure the provider is OIDC 1.0 compliant with a proper Discovery Endpoint</p>\n</blockquote>\n<p>Google Example:</p>\n<ol>\n<li>Go to the Google Gloud Platform and choose youre project: <a href=\"https://console.cloud.google.com/apis/credentials\" target=\"_blank\" title=\"undefined\">https://console.cloud.google.com/apis/credentials</a></li>\n<li>Click on &quot;+ CREATE CREDENTIALS&quot; and choose &quot;OAuth client ID&quot;</li>\n<li>Choose Web application as Application type and give a name</li>\n<li>Add the redirect uris from above</li>\n<li>Save clientid and client secret</li>\n</ol>\n<figure itemprop=\"associatedMedia\" itemscope itemtype=\"http://schema.org/ImageObject\">\n    <a href=\"img/google_add_credentials.gif\" itemprop=\"contentUrl\" data-size=\"1920x1080\">\n        <img src=\"img/google_add_credentials.gif\" itemprop=\"thumbnail\" alt=\"google_add_oauth_credentials\" />\n    </a>\n    <figcaption itemprop=\"caption description\">Add new oAuth credentials in Google Console</figcaption>\n</figure>\n\n\n\t\t\t\t\t<h4>\n\t\t\t\t\t\t<span id=\"2_Add_custom_login_policy_on_your_organisation\" class=\"offset-anchor\" ></span>\n\t\t\t\t\t\t<a href=\"guide-identity-brokering#2_Add_custom_login_policy_on_your_organisation\" class=\"anchor\" aria-hidden=\"true\"><i class=\"las la-link\"></i></a>\n\t\t\t\t\t\t2. Add custom login policy on your organisation\n\t\t\t\t\t</h4><ol>\n<li>Go to your organisation settings by clicking on &quot;Organisation&quot; in the menu or using the following link: <a href=\"https://console.zitadel.ch/org\" target=\"_blank\" title=\"undefined\">https://console.zitadel.ch/org</a></li>\n<li>Modify your login policy</li>\n<li>As long as you have the default policy, you can&#39;t change the policy. Click create custom policy to set your on settings.</li>\n</ol>\n<figure itemprop=\"associatedMedia\" itemscope itemtype=\"http://schema.org/ImageObject\">\n    <a href=\"img/console_org_custom_login_policy.gif\" itemprop=\"contentUrl\" data-size=\"1920x1080\">\n        <img src=\"img/console_org_custom_login_policy.gif\" itemprop=\"thumbnail\" alt=\"add_custom_login_policy\" />\n    </a>\n    <figcaption itemprop=\"caption description\">Add custom login policy</figcaption>\n</figure>\n\n\n\t\t\t\t\t<h4>\n\t\t\t\t\t\t<span id=\"3_Configure_new_identity_provider\" class=\"offset-anchor\" ></span>\n\t\t\t\t\t\t<a href=\"guide-identity-brokering#3_Configure_new_identity_provider\" class=\"anchor\" aria-hidden=\"true\"><i class=\"las la-link\"></i></a>\n\t\t\t\t\t\t3.Configure new identity provider\n\t\t\t\t\t</h4><ol>\n<li>Go to the identity providers section and click new</li>\n<li>Fill out the form <ul>\n<li>Use the issuer, clientid and client secret provided by your provider</li>\n<li>The scopes will be prefilled with openid, profile and email, because this information is relevant for ZITADEL</li>\n<li>You can choose what fields you like to map as the display name and as username. The fields you can choose are preferred_username and email\n(Example: For Google you should choose email for both fields)</li>\n</ul>\n</li>\n<li>Save your configuration</li>\n<li>Link your new configuration to your login policy. By searching in the organisation category you will get you own configuration. If you choose system you can link all predefined providers.</li>\n</ol>\n<figure itemprop=\"associatedMedia\" itemscope itemtype=\"http://schema.org/ImageObject\">\n    <a href=\"img/console_org_identity_provider.gif\" itemprop=\"contentUrl\" data-size=\"1920x1080\">\n        <img src=\"img/console_org_identity_provider.gif\" itemprop=\"thumbnail\" alt=\"configure_new_identity_provider\" />\n    </a>\n    <figcaption itemprop=\"caption description\">Configure identity provider</figcaption>\n</figure>\n\n<p>Your user will now be able to choose Google for login instead of username/password or mfa.</p>\n\n\t\t\t\t\t<h3>\n\t\t\t\t\t\t<span id=\"Knowledge_Check\" class=\"offset-anchor\" ></span>\n\t\t\t\t\t\t<a href=\"guide-identity-brokering#Knowledge_Check\" class=\"anchor\" aria-hidden=\"true\"><i class=\"las la-link\"></i></a>\n\t\t\t\t\t\tKnowledge Check\n\t\t\t\t\t</h3><ul>\n<li>The issuer for your identity provider is <a href=\"https://issuer.zitadel.ch\" target=\"_blank\" title=\"undefined\">https://issuer.zitadel.ch</a><ul>\n<li><input disabled=\"\" type=\"checkbox\"> yes</li>\n<li><input disabled=\"\" type=\"checkbox\"> no</li>\n</ul>\n</li>\n<li>The identity provider has to be oAuth 2.0 compliant<ul>\n<li><input disabled=\"\" type=\"checkbox\"> yes</li>\n<li><input disabled=\"\" type=\"checkbox\"> no</li>\n</ul>\n</li>\n</ul>\n<details>\n    <summary>\n        Solutions\n    </summary>\n\n<ul>\n<li>The issuer for your identity provider is <a href=\"https://issuer.zitadel.ch\" target=\"_blank\" title=\"undefined\">https://issuer.zitadel.ch</a><ul>\n<li><input disabled=\"\" type=\"checkbox\"> yes</li>\n<li><input checked=\"\" disabled=\"\" type=\"checkbox\"> no (The issuer is provided by your choosen identity provider. In the case of Google it&#39;s <a href=\"https://accounts.google.com\" target=\"_blank\" title=\"undefined\">https://accounts.google.com</a>)</li>\n</ul>\n</li>\n<li>The identity provider has to be oAuth 2.0 compliant<ul>\n<li><input checked=\"\" disabled=\"\" type=\"checkbox\"> yes</li>\n<li><input disabled=\"\" type=\"checkbox\"> no</li>\n</ul>\n</li>\n</ul>\n</details>\n\n\n\t\t\t\t\t<h3>\n\t\t\t\t\t\t<span id=\"Summary\" class=\"offset-anchor\" ></span>\n\t\t\t\t\t\t<a href=\"guide-identity-brokering#Summary\" class=\"anchor\" aria-hidden=\"true\"><i class=\"las la-link\"></i></a>\n\t\t\t\t\t\tSummary\n\t\t\t\t\t</h3><ul>\n<li>You can federate identities of all oAuth 2.0 compliant external identity providers</li>\n<li>Configure the provider in your custom login policy</li>\n</ul>\n<p>Where to go from here: </p>\n<ul>\n<li>ZITADEL Projects</li>\n<li>Service users</li>\n</ul>\n","metadata":{"title":"Identity Brokering","tags":"developer, organisation manager","readingtime":"15min"},"subsections":[{"slug":"What_is_Identity_Brokering_and_Federated_Identities","title":"What is Identity Brokering and Federated Identities?","level":3},{"slug":"Exercise_Register_an_external_identity_provider","title":"Exercise: Register an external identity provider","level":3},{"slug":"1_Create_new_OIDC_Client","title":"1. Create new OIDC Client","level":4},{"slug":"2_Add_custom_login_policy_on_your_organisation","title":"2. Add custom login policy on your organisation","level":4},{"slug":"3_Configure_new_identity_provider","title":"3.Configure new identity provider","level":4},{"slug":"Knowledge_Check","title":"Knowledge Check","level":3},{"slug":"Summary","title":"Summary","level":3}],"slug":"Identity_Brokering","file":"00-guide-identity-brokering.md"}],"seo":""}