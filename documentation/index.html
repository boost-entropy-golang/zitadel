<!doctype html> <html class="theme-default typo-default" lang=en> <head> <meta charset=utf-8> <meta content="width=device-width,initial-scale=1" name=viewport> <meta content=#159794 name=theme-color> <base href=/ > <link href=prism.css rel=stylesheet> <link href=manifest.json rel=manifest> <link href=icons/favicon.ico rel=icon type=image/x-icon> <link href=https://maxst.icons8.com/vue-static/landings/line-awesome/line-awesome/1.3.0/css/line-awesome.min.css rel=stylesheet> <link href=default-skin/default-skin.css rel=stylesheet> <link href=photoswipe.css rel=stylesheet> <script src=photoswipe.min.js></script> <script src=photoswipe-ui-default.min.js></script> <link href="https://fonts.googleapis.com/css2?family=Lato&display=swap" rel=stylesheet> <link href=client/client-f72f2d9c.css rel=stylesheet><link href=client/[slug]-04ac5d44.css rel=stylesheet> <style>.hljs,.hljs-subst{color:#e8eaed}.hljs-comment{color:#999}.hljs-tag{color:#f8b886}.hljs-keyword{color:#ff2069}.hljs-attr{color:#a3acb9}.hljs-number{color:#f8b886}.hljs-deletion,.hljs-quote,.hljs-selector-class,.hljs-selector-id,.hljs-string,.hljs-template-tag,.hljs-type{color:#1ea672}.hljs-section,.hljs-title{color:#1ea672}.hljs-literal{color:#f8b886}.hljs-meta{color:#e8eaed}.hljs-meta-string{color:#e8eaed}</style> <title>ZITADEL Documentation • documentation</title> <link href=/client/client.5ae4bef9.js rel=modulepreload as=script crossorigin=use-credentials><link href=/client/client-f72f2d9c.css rel=preload as=style><link href=/client/[slug].3703b508.js rel=modulepreload as=script crossorigin=use-credentials><link href=/client/inject_styles.5607aec6.js rel=modulepreload as=script crossorigin=use-credentials><link href=/client/[slug]-04ac5d44.css rel=preload as=style></head> <body> <div id=sapper> <main class=svelte-ke1jp4> <div class="svelte-1ulbqkc content"><a href=. class="svelte-1ulbqkc home"><img alt="zitadel logo" src=logos/zitadel-logo-solo-darkdesign.svg class=svelte-1ulbqkc></a> <span class="svelte-1ulbqkc fill-space"></span> <div class="svelte-1ulbqkc btn-wrapper"><button class="svelte-1ulbqkc list-item"><i class="las la-bars svelte-1ulbqkc"></i><span class=svelte-1ulbqkc>Docs</span></button> <div class="svelte-1ulbqkc wrapper"></div></div> <a href=https://zitadel.ch class="svelte-1ulbqkc list-item" target=_blank>More about ZITADEL</a> </div> <div class="svelte-fr1szm content listify"><section class=svelte-fr1szm data-id=Overview><h2 class=svelte-fr1szm><span class=offset-anchor id=Overview></span> <a href=documentation#Overview class=anchor aria-hidden></a> Overview <small class=svelte-fr1szm><a href=https://github.com/caos/zitadel/edit/master/site/docs/documentation/00-overview.en.md class=svelte-fr1szm title="edit this section"><i class="las la-external-link-alt" style=font-size:24px;height:24px><use xlink:href="#las la-external-link-alt"></use></i></a> </small></h2> <blockquote> <p>All documentations are under active work and subject to change soon!</p> </blockquote> <p>This part of the <strong>ZITADEL</strong> documentation comprises three major subject areas:</p> <ol> <li>Principles</li> <li>Architecture</li> <li>Protocols</li> </ol> <p>Please be reminded that ZITADEL is open source — and so is the documentation. Should you happen to stumble over an incorrectness, a spelling mistake, a hard-to-understand text passage, please don’t hesitate to leave a comment or propose a corresponding change.</p> </section><section class=svelte-fr1szm data-id=Principles><h2 class=svelte-fr1szm><span class=offset-anchor id=Principles></span> <a href=documentation#Principles class=anchor aria-hidden></a> Principles <small class=svelte-fr1szm><a href=https://github.com/caos/zitadel/edit/master/site/docs/documentation/01-priciples.en.md class=svelte-fr1szm title="edit this section"><i class="las la-external-link-alt" style=font-size:24px;height:24px><use xlink:href="#las la-external-link-alt"></use></i></a> </small></h2> <h3> <span class=offset-anchor id=ZITADEL_engineering_and_design_principles></span> <a href=documentation#ZITADEL_engineering_and_design_principles class=anchor aria-hidden=true> <i class="las la-link"></i> </a> ZITADEL engineering and design principles </h3><ul> <li>Be transparent about your decisions</li> <li>Embrace stateless application design</li> <li>System of records is the event store</li> <li>Everything else needs to be able to be regenerated</li> <li>Try not so solve complex problems outside of the IAM Domain</li> <li>Use a scalable storage for the event store and read models</li> <li>Try to be idempotent whenever possible</li> <li>Reduce necessity of external systems or dependencies as much as possible</li> <li>Embrace automation</li> <li>Design API first</li> <li>Optimize all components for day-two operations</li> <li>Use only open source projects with permissive licenses</li> <li>Don't roll your own crypto algorithm</li> <li>Embrace (industry) standard as much as possible</li> <li>Make use of platform features</li> <li>Be able to run with a CDN and WAF</li> <li>Releases utilized semantic versioning and release whenever feasible</li> </ul> </section><section class=svelte-fr1szm data-id=Architecture><h2 class=svelte-fr1szm><span class=offset-anchor id=Architecture></span> <a href=documentation#Architecture class=anchor aria-hidden></a> Architecture <small class=svelte-fr1szm><a href=https://github.com/caos/zitadel/edit/master/site/docs/documentation/02-architecture.en.md class=svelte-fr1szm title="edit this section"><i class="las la-external-link-alt" style=font-size:24px;height:24px><use xlink:href="#las la-external-link-alt"></use></i></a> </small></h2> <blockquote> <p>Images in better quality follow soon.</p> </blockquote> <h3> <span class=offset-anchor id=Software_Architecture></span> <a href=documentation#Software_Architecture class=anchor aria-hidden=true> <i class="las la-link"></i> </a> Software Architecture </h3><p><strong>ZITADEL</strong> is built with two essential patterns. Eventsourcing and CQRS. Due to the nature of eventsourcing <strong>ZITADEL</strong> provides the unique capability to generate a strong audit trail of ALL the things that happen to its resources, without compromising on storage cost or audit trail length.</p> <p>The combination with CQRS makes <strong>ZITADEL</strong> eventual consistent which, from our perspective is a great benefit. It allows us to build a SOR (Source of Records) which is the one single point of truth for all computed states. The SOR needs to be transaction safe to make sure all operations are in order.</p> <p>Each <strong>ZITADEL</strong> contains all components of the IAM, from serving as API, rendering / serving GUI's, background processing of events and task or being a GITOPS style operator. This AiO (All in One) approach makes scaling from a single machine to a multi region (multi cluster) seamless.</p> <div class=zitadel-gallery itemscope itemtype=http://schema.org/ImageGallery> <figure itemprop=associatedMedia itemscope itemtype=http://schema.org/ImageObject> <a href=img/zitadel_software_architecture.png data-size=1530x681 itemprop=contentUrl> <img alt="Software Architecture" src=img/zitadel_software_architecture.png itemprop=thumbnail> </a> <figcaption itemprop="caption description">Software Architecture</figcaption> </figure> </div> <h4> <span class=offset-anchor id=Component_Command_Side></span> <a href=documentation#Component_Command_Side class=anchor aria-hidden=true> <i class="las la-link"></i> </a> Component Command Side </h4><p>The <strong>command handler</strong> receives all operations who alter a IAM resource. For example if a user changes his name. This information is then passed to <strong>command validation</strong> for processing of the business logic, for example to make sure that the user actually can change his name. If this succeeds all generated events are inserted into the eventstore when required all within one transaction.</p> <ul> <li>Transaction safety is a MUST</li> <li>Availability MUST be high</li> </ul> <blockquote> <p>When we classify this with the CAP theorem we would choose <strong>Consistent</strong> and <strong>Available</strong> but leave <strong>Performance</strong> aside.</p> </blockquote> <h4> <span class=offset-anchor id=Component_Spooler></span> <a href=documentation#Component_Spooler class=anchor aria-hidden=true> <i class="las la-link"></i> </a> Component Spooler </h4><p>The spoolers job is it to keep a query view up-to-date or at least look that it does not have a too big lag behind the eventstore. Each query view has its own spooler who is responsible to look for the events who are relevant to generate the query view. It does this by triggering the relevant projection. Spoolers are especially necessary where someone can query datasets instead of single ids.</p> <blockquote> <p>The query side has the option to dynamically check the eventstore for newer events on a certain id, see query side for more information Each view can have exactly one spooler, but spoolers are dynamically leader elected, so even if a spooler crashes it will be replaced in a short amount of time.</p> </blockquote> <h4> <span class=offset-anchor id=Component_Query_Side></span> <a href=documentation#Component_Query_Side class=anchor aria-hidden=true> <i class="las la-link"></i> </a> Component Query Side </h4><p>The query handler receives all read relevant operations. These can either be query or simple <code>getById</code> calls. When receiving a query it will proceed by passing this to the repository which will call the database and return the dataset. If a request calls for a specific id the call will, most of the times, be revalidated against the eventstore. This is achieved by triggering the projection to make sure that the last sequence of a id is loaded into the query view.</p> <ul> <li>Easy to query</li> <li>Short response times (80%of queries below 100ms on the api server)</li> <li>Availability MUST be high</li> </ul> <blockquote> <p>When we classify this with the CAP theorem we would choose <strong>Available</strong> and <strong>Performance</strong> but leave <strong>Consistent</strong> aside TODO explain more here</p> </blockquote> <h4> <span class=offset-anchor id=Component_HTTP_Server></span> <a href=documentation#Component_HTTP_Server class=anchor aria-hidden=true> <i class="las la-link"></i> </a> Component HTTP Server </h4><p>The http server is responsible for serving the management GUI called <strong>ZITADEL Console</strong>, serving the static assets and as well rendering server side html (login, password-reset, verification, ...)</p> <h3> <span class=offset-anchor id=Cluster_Architecture></span> <a href=documentation#Cluster_Architecture class=anchor aria-hidden=true> <i class="las la-link"></i> </a> Cluster Architecture </h3><p>A <strong>ZITADEL Cluster</strong> is a highly available IAM system with each component critical for serving traffic laid out at least three times. As our storage (CockroachDB) relies on Raft it is also necessary to always utilizes odd numbers to address for "split brain" scenarios. Hence our reference design is to have three application nodes and three Storage Nodes.</p> <p>If you deploy <strong>ZITADEL</strong> with our GITOPS Tooling <a href=https://github.com/caos/orbos target=_blank><strong>ORBOS</strong></a> we create 7 seven nodes. One management, three application and three storage nodes.</p> <blockquote> <p>You can horizontaly scale zitadel, but we recommend to use multiple cluster instead to reduce the blast radius from impacts to a single cluster</p> </blockquote> <div class=zitadel-gallery itemscope itemtype=http://schema.org/ImageGallery> <figure itemprop=associatedMedia itemscope itemtype=http://schema.org/ImageObject> <a href=img/zitadel_cluster_architecture.png data-size=1530x681 itemprop=contentUrl> <img alt="Cluster Architecture" src=img/zitadel_cluster_architecture.png itemprop=thumbnail> </a> <figcaption itemprop="caption description">Cluster Architecture</figcaption> </figure> </div> <h3> <span class=offset-anchor id=Multi_Cluster_Architecture></span> <a href=documentation#Multi_Cluster_Architecture class=anchor aria-hidden=true> <i class="las la-link"></i> </a> Multi Cluster Architecture </h3><p>To scale <strong>ZITADEL</strong> is recommend to create smaller clusters, see cluster architecture and then create a fabric which interconnects the database. In our reference design we recommend to create a cluster per cloud provider or availability zone and to group them into regions.</p> <p>For example, you can run three cluster for the region switzerland. On with GCE, one with cloudscale and one with inventx.</p> <p>With this design even the outage of a whole data-center would have a minimal impact as all data is still available at the other two locations.</p> <blockquote> <p>Cockroach needs to be configured with locality flags to proper distribute data over the zones East - West connectivity for the database can be solved at you discretion. We recommend to expose the public ips and run traffic directly without any VPN or Mesh Use MTLS in combination with IP Allowlist in the firewalls!</p> </blockquote> <div class=zitadel-gallery itemscope itemtype=http://schema.org/ImageGallery> <figure itemprop=associatedMedia itemscope itemtype=http://schema.org/ImageObject> <a href=img/zitadel_multicluster_architecture.png data-size=1530x681 itemprop=contentUrl> <img alt="Multi-Cluster Architecture" src=img/zitadel_multicluster_architecture.png itemprop=thumbnail> </a> <figcaption itemprop="caption description">Multi-Cluster Architecture</figcaption> </figure> </div> </section><section class=svelte-fr1szm data-id=OpenID_Connect_1_0_and_OAuth_2_0><h2 class=svelte-fr1szm><span class=offset-anchor id=OpenID_Connect_1_0_and_OAuth_2_0></span> <a href=documentation#OpenID_Connect_1_0_and_OAuth_2_0 class=anchor aria-hidden></a> OpenID Connect 1.0 & OAuth 2.0 <small class=svelte-fr1szm><a href=https://github.com/caos/zitadel/edit/master/site/docs/documentation/03-openidoauth.en.md class=svelte-fr1szm title="edit this section"><i class="las la-external-link-alt" style=font-size:24px;height:24px><use xlink:href="#las la-external-link-alt"></use></i></a> </small></h2> <h3> <span class=offset-anchor id=Endpoints_and_Domains></span> <a href=documentation#Endpoints_and_Domains class=anchor aria-hidden=true> <i class="las la-link"></i> </a> Endpoints and Domains </h3><p>This chapter documents the <a href=https://openid.net/connect/ target=_blank>OpenID Connect 1.0</a> and <a href=https://oauth.net/2/ target=_blank>OAuth 2.0</a> features provided by <strong>ZITADEL</strong>.</p> <p>Under normal circumstances <strong>ZITADEL</strong> need four domain names to operate properly.</p> <div class=table-wrapper> <table> <thead> <tr> <th align=left>Domain Name</th> <th align=left>Example</th> <th>Description</th> </tr> </thead> <tr> <td align=left>issuer</td> <td align=left><code>issuer.zitadel.ch</code></td> <td>Provides the <a href=#openid-connect-10-discovery>OpenID Connect 1.0 Discovery Endpoint</a></td> </tr> <tr> <td align=left>api</td> <td align=left><code>api.zitadel.ch</code></td> <td>All ZITADEL API's are located under this domain see <a href=develop#APIs>API explanation</a> for details</td> </tr> <tr> <td align=left>login</td> <td align=left><code>accounts.zitadel.ch</code></td> <td>The accounts.* page provides server renderer pages like login and register and as well the authorization_endpoint for OpenID Connect</td> </tr> <tr> <td align=left>console</td> <td align=left><code>console.zitadel.ch</code></td> <td>With the console.* domain we serve the assets for the management gui</td> </tr> </table> </div> <h4> <span class=offset-anchor id=OpenID_Connect_1_0_Discovery></span> <a href=documentation#OpenID_Connect_1_0_Discovery class=anchor aria-hidden=true> <i class="las la-link"></i> </a> OpenID Connect 1.0 Discovery </h4><p>The OpenID Connect Discovery Endpoint is located within the issuer domain. For example with <a href=zitadel.ch>zitadel.ch</a> this would be the domain <a href=issuer.zitadel.ch>issuer.zitadel.ch</a>. This would give us <a href=https://issuer.zitadel.ch/.well-known/openid-configuration target=_blank>https://issuer.zitadel.ch/.well-known/openid-configuration</a>.</p> <p><strong>Link to spec.</strong> <a href=https://openid.net/specs/openid-connect-discovery-1_0.html target=_blank>OpenID Connect Discovery 1.0 incorporating errata set 1</a></p> <h4> <span class=offset-anchor id=authorization_endpoint></span> <a href=documentation#authorization_endpoint class=anchor aria-hidden=true> <i class="las la-link"></i> </a> authorization_endpoint </h4><p><a href=https://accounts.zitadel.ch/oauth/v2/authorize target=_blank>https://accounts.zitadel.ch/oauth/v2/authorize</a></p> <blockquote> <p>The authorization_endpoint is located with the login page, due to the need of accessing the same cookie domain</p> </blockquote> <h4> <span class=offset-anchor id=token_endpoint></span> <a href=documentation#token_endpoint class=anchor aria-hidden=true> <i class="las la-link"></i> </a> token_endpoint </h4><p><a href=https://api.zitadel.ch/oauth/v2/token target=_blank>https://api.zitadel.ch/oauth/v2/token</a></p> <h4> <span class=offset-anchor id=userinfo_endpoint></span> <a href=documentation#userinfo_endpoint class=anchor aria-hidden=true> <i class="las la-link"></i> </a> userinfo_endpoint </h4><p><a href=https://api.zitadel.ch/oauth/v2/userinfo target=_blank>https://api.zitadel.ch/oauth/v2/userinfo</a></p> <h4> <span class=offset-anchor id=end_session_endpoint></span> <a href=documentation#end_session_endpoint class=anchor aria-hidden=true> <i class="las la-link"></i> </a> end_session_endpoint </h4><p><a href=https://accounts.zitadel.ch/oauth/v2/endsession target=_blank>https://accounts.zitadel.ch/oauth/v2/endsession</a></p> <blockquote> <p>The end_session_endpoint is located with the login page, due to the need of accessing the same cookie domain</p> </blockquote> <h4> <span class=offset-anchor id=jwks_uri></span> <a href=documentation#jwks_uri class=anchor aria-hidden=true> <i class="las la-link"></i> </a> jwks_uri </h4><p><a href=https://api.zitadel.ch/oauth/v2/keys target=_blank>https://api.zitadel.ch/oauth/v2/keys</a></p> <blockquote> <p>Be aware that these keys can be rotated without any prior notice. We will however make sure that a proper <code>kid</code> is set with each key!</p> </blockquote> <h4> <span class=offset-anchor id=OAuth_2_0_Metadata></span> <a href=documentation#OAuth_2_0_Metadata class=anchor aria-hidden=true> <i class="las la-link"></i> </a> OAuth 2.0 Metadata </h4><p><strong>ZITADEL</strong> does not yet provide a OAuth 2.0 Metadata endpoint but instead provides a <a href=#openid-connect-10-discovery>OpenID Connect Discovery Endpoint</a>.</p> <h3> <span class=offset-anchor id=Scopes></span> <a href=documentation#Scopes class=anchor aria-hidden=true> <i class="las la-link"></i> </a> Scopes </h3><p>ZITADEL supports the usage of scopes as way of requesting information from the IAM and also instruct ZITADEL to do certain operations.</p> <h4> <span class=offset-anchor id=Standard_Scopes></span> <a href=documentation#Standard_Scopes class=anchor aria-hidden=true> <i class="las la-link"></i> </a> Standard Scopes </h4><div class=table-wrapper> <table> <thead> <tr> <th align=left>Scopes</th> <th align=left>Example</th> <th>Description</th> </tr> </thead> <tr> <td align=left>openid</td> <td align=left><code>openid</code></td> <td>When using openid connect this is a mandatory scope</td> </tr> <tr> <td align=left>profile</td> <td align=left><code>profile</code></td> <td>Optional scope to request the profile of the subject</td> </tr> <tr> <td align=left>email</td> <td align=left><code>email</code></td> <td>Optional scope to request the email of the subject</td> </tr> <tr> <td align=left>address</td> <td align=left><code>address</code></td> <td>Optional scope to request the address of the subject</td> </tr> </table> </div> <h4> <span class=offset-anchor id=Custom_Scopes></span> <a href=documentation#Custom_Scopes class=anchor aria-hidden=true> <i class="las la-link"></i> </a> Custom Scopes </h4><blockquote> <p>This feature is not yet released</p> </blockquote> <h4> <span class=offset-anchor id=Reserved_Scopes></span> <a href=documentation#Reserved_Scopes class=anchor aria-hidden=true> <i class="las la-link"></i> </a> Reserved Scopes </h4><p>In addition to the standard compliant scopes we utilize the following scopes.</p> <div class=table-wrapper> <table> <thead> <tr> <th align=left>Scopes</th> <th align=left>Example</th> <th>Description</th> </tr> </thead> <tr> <td align=left>urn:zitadel:iam:org:project:role:{rolename}</td> <td align=left><code>urn:zitadel:iam:org:project:role:user</code></td> <td>By using this scope a <a href=administrate#clients>client</a> can request the claim urn:zitadel:iam:roles:rolename} to be asserted when possible. As an alternative approach you can enable all <a href=administrate#Roles>roles</a> to be asserted from the <a href=administrate#projects>project</a> a <a href=administrate#clients>client</a> belongs to. See details <a href=administrate#RBAC_Settings>here</a></td> </tr> <tr> <td align=left>urn:zitadel:iam:org:domain:primary:{domainname}</td> <td align=left><code>urn:zitadel:iam:org:domain:primary:acme.ch</code></td> <td>When requesting this scope <strong>ZITADEL</strong> will enforce that the user is a member of the selected organization. If the organization does not exist a failure is displayed</td> </tr> <tr> <td align=left>urn:zitadel:iam:role:{rolename}</td> <td align=left></td> <td></td> </tr> <tr> <td align=left>urn:zitadel:iam:org:project:id:{projectid}:aud</td> <td align=left>ZITADEL's Project id is <code>urn:zitadel:iam:org:project:id:69234237810729019:aud</code></td> <td>By adding this scope, the requested projectid will be added to the audience of the access and id token</td> </tr> </table> </div><blockquote> <p>If access to ZITADEL's API's is needed with a service user the scope <code>urn:zitadel:iam:org:project:id:69234237810729019:aud</code> needs to be used with the JWT Profile request</p> </blockquote> <h3> <span class=offset-anchor id=Claims></span> <a href=documentation#Claims class=anchor aria-hidden=true> <i class="las la-link"></i> </a> Claims </h3><p>ZITADEL asserts claims on different places according to the corresponding specifications or project and clients settings. Please check below the matrix for an overview where which scope is asserted.</p> <div class=table-wrapper> <table> <thead> <tr> <th align=left>Claims</th> <th align=left>Userinfo</th> <th>ID Token</th> <th>Access Token</th> </tr> </thead> <tr> <td align=left>acr</td> <td align=left>Yes</td> <td>Yes</td> <td>No</td> </tr> <tr> <td align=left>address</td> <td align=left>Yes when requested</td> <td>Yes only when response type <code>id_token</code></td> <td>No</td> </tr> <tr> <td align=left>amr</td> <td align=left>Yes</td> <td>Yes</td> <td>No</td> </tr> <tr> <td align=left>aud</td> <td align=left>No</td> <td>Yes</td> <td>Yes when JWT</td> </tr> <tr> <td align=left>auth_time</td> <td align=left>Yes</td> <td>Yes</td> <td>No</td> </tr> <tr> <td align=left>azp</td> <td align=left>No</td> <td>Yes</td> <td>Yes when JWT</td> </tr> <tr> <td align=left>email</td> <td align=left>Yes when requested</td> <td>Yes only when response type <code>id_token</code></td> <td>No</td> </tr> <tr> <td align=left>email_verified</td> <td align=left>Yes when requested</td> <td>Yes only when response type <code>id_token</code></td> <td>No</td> </tr> <tr> <td align=left>exp</td> <td align=left>No</td> <td>Yes</td> <td>Yes when JWT</td> </tr> <tr> <td align=left>family_name</td> <td align=left>Yes when requested</td> <td>Yes when requested</td> <td>No</td> </tr> <tr> <td align=left>gender</td> <td align=left>Yes when requested</td> <td>Yes when requested</td> <td>No</td> </tr> <tr> <td align=left>given_name</td> <td align=left>Yes when requested</td> <td>Yes when requested</td> <td>No</td> </tr> <tr> <td align=left>iat</td> <td align=left>No</td> <td>Yes</td> <td>Yes when JWT</td> </tr> <tr> <td align=left>iss</td> <td align=left>No</td> <td>Yes</td> <td>Yes when JWT</td> </tr> <tr> <td align=left>locale</td> <td align=left>Yes when requested</td> <td>Yes when requested</td> <td>No</td> </tr> <tr> <td align=left>name</td> <td align=left>Yes when requested</td> <td>Yes when requested</td> <td>No</td> </tr> <tr> <td align=left>nonce</td> <td align=left>No</td> <td>Yes</td> <td>No</td> </tr> <tr> <td align=left>phone</td> <td align=left>Yes when requested</td> <td>Yes only when response type <code>id_token</code></td> <td>No</td> </tr> <tr> <td align=left>preferred_username</td> <td align=left>Yes when requested</td> <td>Yes</td> <td>No</td> </tr> <tr> <td align=left>sub</td> <td align=left>Yes</td> <td>Yes</td> <td>Yes when JWT</td> </tr> <tr> <td align=left>urn:zitadel:iam:org:domain:primary:{domainname}</td> <td align=left>Yes when requested</td> <td>Yes when requested</td> <td>Yes when JWT and requested</td> </tr> <tr> <td align=left>urn:zitadel:iam:org:project:roles:{rolename}</td> <td align=left>Yes when requested</td> <td>Yes when requested or configured</td> <td>Yes when JWT and requested or configured</td> </tr> </table> </div> <h4> <span class=offset-anchor id=Standard_Claims></span> <a href=documentation#Standard_Claims class=anchor aria-hidden=true> <i class="las la-link"></i> </a> Standard Claims </h4><div class=table-wrapper> <table> <thead> <tr> <th align=left>Claims</th> <th align=left>Example</th> <th>Description</th> </tr> </thead> <tr> <td align=left>acr</td> <td align=left>TBA</td> <td>TBA</td> </tr> <tr> <td align=left>address</td> <td align=left><code>Teufener Strasse 19, 9000 St. Gallen</code></td> <td>TBA</td> </tr> <tr> <td align=left>amr</td> <td align=left><code>pwd mfa</code></td> <td>Authentication Method References as defined in <a href=https://tools.ietf.org/html/rfc8176 target=_blank>RFC8176</a></td> </tr> <tr> <td align=left>aud</td> <td align=left><code>69234237810729019</code></td> <td>By default all client id's and the project id is included</td> </tr> <tr> <td align=left>auth_time</td> <td align=left><code>1311280969</code></td> <td>Unix time of the authentication</td> </tr> <tr> <td align=left>azp</td> <td align=left><code>69234237810729234</code></td> <td>Client id of the client who requested the token</td> </tr> <tr> <td align=left>email</td> <td align=left><code>road.runner@acme.ch</code></td> <td>Email Address of the subject</td> </tr> <tr> <td align=left>email_verified</td> <td align=left><code>true</code></td> <td>Boolean if the email was verified by ZITADEL</td> </tr> <tr> <td align=left>exp</td> <td align=left><code>1311281970</code></td> <td>Time the token expires as unix time</td> </tr> <tr> <td align=left>family_name</td> <td align=left><code>Runner</code></td> <td>The subjects family name</td> </tr> <tr> <td align=left>gender</td> <td align=left><code>other</code></td> <td>Gender of the subject</td> </tr> <tr> <td align=left>given_name</td> <td align=left><code>Road</code></td> <td>Given name of the subject</td> </tr> <tr> <td align=left>iat</td> <td align=left><code>1311280970</code></td> <td>Issued at time of the token as unix time</td> </tr> <tr> <td align=left>iss</td> <td align=left><code>https://issuer.zitadel.ch</code></td> <td>Issuing domain of a token</td> </tr> <tr> <td align=left>locale</td> <td align=left><code>en</code></td> <td>Language from the subject</td> </tr> <tr> <td align=left>name</td> <td align=left><code>Road Runner</code></td> <td>The subjects full name</td> </tr> <tr> <td align=left>nonce</td> <td align=left><code>blQtVEJHNTF0WHhFQmhqZ0RqeHJsdzdkd2d...</code></td> <td>The nonce provided by the client</td> </tr> <tr> <td align=left>phone</td> <td align=left><code>+41 79 XXX XX XX</code></td> <td>Phone number provided by the user</td> </tr> <tr> <td align=left>preferred_username</td> <td align=left><code>road.runner@acme.caos.ch</code></td> <td>ZITADEL's login name of the user. Consist of <code>username@primarydomain</code></td> </tr> <tr> <td align=left>sub</td> <td align=left><code>77776025198584418</code></td> <td>Subject ID of the user</td> </tr> </table> </div> <h4> <span class=offset-anchor id=Custom_Claims></span> <a href=documentation#Custom_Claims class=anchor aria-hidden=true> <i class="las la-link"></i> </a> Custom Claims </h4><blockquote> <p>This feature is not yet released</p> </blockquote> <h4> <span class=offset-anchor id=Reserved_Claims></span> <a href=documentation#Reserved_Claims class=anchor aria-hidden=true> <i class="las la-link"></i> </a> Reserved Claims </h4><p>ZITADEL reserves some claims to assert certain data.</p> <div class=table-wrapper> <table> <thead> <tr> <th align=left>Claims</th> <th align=left>Example</th> <th>Description</th> </tr> </thead> <tr> <td align=left>urn:zitadel:iam:org:domain:primary:{domainname}</td> <td align=left><code>{"urn:zitadel:iam:org:domain:primary": "acme.ch"}</code></td> <td>This claim represents the primary domain of the organization the user belongs to.</td> </tr> <tr> <td align=left>urn:zitadel:iam:org:project:roles:{rolename}</td> <td align=left><code>{"urn:zitadel:iam:org:project:roles": [ {"user": {"id1": "acme.zitade.ch", "id2": "caos.ch"} } ] }</code></td> <td>When roles are asserted, ZITADEL does this by providing the <code>id</code> and <code>primaryDomain</code> below the role. This gives you the option to check in which organization a user has the role.</td> </tr> <tr> <td align=left>urn:zitadel:iam:roles:{rolename}</td> <td align=left>TBA</td> <td>TBA</td> </tr> </table> </div> <h3> <span class=offset-anchor id=Grant_Types></span> <a href=documentation#Grant_Types class=anchor aria-hidden=true> <i class="las la-link"></i> </a> Grant Types </h3><p>For a list of supported or unsupported <code>Grant Types</code> please have a look at the table below.</p> <div class=table-wrapper> <table> <thead> <tr> <th align=left>Grant Type</th> <th align=left>Supported</th> </tr> </thead> <tr> <td align=left>Authorization Code</td> <td align=left>yes</td> </tr> <tr> <td align=left>Authorization Code with PKCE</td> <td align=left>yes</td> </tr> <tr> <td align=left>Client Credentials</td> <td align=left>yes</td> </tr> <tr> <td align=left>Device Authorization</td> <td align=left>under consideration</td> </tr> <tr> <td align=left>Implicit</td> <td align=left>yes</td> </tr> <tr> <td align=left>JSON Web Token (JWT) Profile</td> <td align=left>partially</td> </tr> <tr> <td align=left>Refresh Token</td> <td align=left>work in progress</td> </tr> <tr> <td align=left>Resource Owner Password Credentials</td> <td align=left>no</td> </tr> <tr> <td align=left>Security Assertion Markup Language (SAML) 2.0 Profile</td> <td align=left>no</td> </tr> <tr> <td align=left>Token Exchange</td> <td align=left>work in progress</td> </tr> </table> </div> <h4> <span class=offset-anchor id=Authorization_Code></span> <a href=documentation#Authorization_Code class=anchor aria-hidden=true> <i class="las la-link"></i> </a> Authorization Code </h4><p><strong>Link to spec.</strong> <a href=https://tools.ietf.org/html/rfc6749#section-1.3.1 target=_blank>The OAuth 2.0 Authorization Framework Section 1.3.1</a></p> <h4> <span class=offset-anchor id=Proof_Key_for_Code_Exchange></span> <a href=documentation#Proof_Key_for_Code_Exchange class=anchor aria-hidden=true> <i class="las la-link"></i> </a> Proof Key for Code Exchange </h4><p><strong>Link to spec.</strong> <a href=https://tools.ietf.org/html/rfc7636 target=_blank>Proof Key for Code Exchange by OAuth Public Clients</a></p> <h4> <span class=offset-anchor id=Implicit></span> <a href=documentation#Implicit class=anchor aria-hidden=true> <i class="las la-link"></i> </a> Implicit </h4><p><strong>Link to spec.</strong> <a href=https://tools.ietf.org/html/rfc6749#section-1.3.2 target=_blank>The OAuth 2.0 Authorization Framework Section 1.3.2</a></p> <h4> <span class=offset-anchor id=Client_Credentials></span> <a href=documentation#Client_Credentials class=anchor aria-hidden=true> <i class="las la-link"></i> </a> Client Credentials </h4><p><strong>Link to spec.</strong> <a href=https://tools.ietf.org/html/rfc6749#section-1.3.4 target=_blank>The OAuth 2.0 Authorization Framework Section 1.3.4</a></p> <h4> <span class=offset-anchor id=Refresh_Token></span> <a href=documentation#Refresh_Token class=anchor aria-hidden=true> <i class="las la-link"></i> </a> Refresh Token </h4><p><strong>Link to spec.</strong> <a href=https://tools.ietf.org/html/rfc6749#section-1.5 target=_blank>The OAuth 2.0 Authorization Framework Section 1.5</a></p> <h4> <span class=offset-anchor id=JSON_Web_Token_JWT_Profile></span> <a href=documentation#JSON_Web_Token_JWT_Profile class=anchor aria-hidden=true> <i class="las la-link"></i> </a> JSON Web Token (JWT) Profile </h4><p><strong>Link to spec.</strong> <a href=https://tools.ietf.org/html/rfc7523 target=_blank>JSON Web Token (JWT) Profile for OAuth 2.0 Client Authentication and Authorization Grants</a></p> <h5> <span class=offset-anchor id=false data-scrollignore></span> <a href=documentation#false class=anchor aria-hidden=true> <i class="las la-link"></i> </a> Using JWTs as Authorization Grants </h5><p>Our service user work with the JWT profile to authenticate them against ZITADEL.</p> <ol> <li>Create or use an existing service user</li> <li>Create a new key and download it</li> <li>Generate a JWT with the structure below and sing it with the downloaded key</li> <li>Send the JWT Base64 encoded to ZITADEL's token endpoint</li> <li>Use the received access token</li> </ol> <div class=side-by-side><div class=copy><p>Key JSON</p> <div class=table-wrapper> <table> <thead> <tr> <th align=left>Key</th> <th align=left>Example</th> <th align=left>Description</th> </tr> </thead> <tr> <td align=left>type</td> <td align=left><code>"serviceaccount"</code></td> <td align=left>The type of account, right now only serviceaccount is valid</td> </tr> <tr> <td align=left>keyId</td> <td align=left><code>"81693565968772648"</code></td> <td align=left>This is unique ID of the key</td> </tr> <tr> <td align=left>key</td> <td align=left><code>"-----BEGIN RSA PRIVATE KEY-----...-----END RSA PRIVATE KEY-----"</code></td> <td align=left>The private key generated by ZITADEL, this can not be regenerated!</td> </tr> <tr> <td align=left>userId</td> <td align=left><code>78366401571647008</code></td> <td align=left>The service users ID, this is the same as the subject from tokens</td> </tr> </table> </div></div><div class=code><div class=""><pre class="language-undefined"><code>{
	<span class=hljs-attr>"type"</span>: <span class=hljs-string>"serviceaccount"</span>,
	<span class=hljs-attr>"keyId"</span>: <span class=hljs-string>"81693565968772648"</span>,
	<span class=hljs-attr>"key"</span>: <span class=hljs-string>"-----BEGIN RSA PRIVATE KEY-----...-----END RSA PRIVATE KEY-----"</span>,
	<span class=hljs-attr>"userId"</span>: <span class=hljs-string>"78366401571647008"</span>
}</code></pre></div></div></div><div class=side-by-side><div class=copy><p>JWT</p> <div class=table-wrapper> <table> <thead> <tr> <th align=left>Claim</th> <th align=left>Example</th> <th align=left>Description</th> </tr> </thead> <tr> <td align=left>aud</td> <td align=left><code>"https://issuer.zitadel.ch"</code></td> <td align=left>String or Array of intended audiences MUST include ZITADEL's issuing domain</td> </tr> <tr> <td align=left>exp</td> <td align=left><code>1605183582</code></td> <td align=left>Unix timestamp of the expiry, MUST NOT be longer than 1h</td> </tr> <tr> <td align=left>iat</td> <td align=left><code>1605179982</code></td> <td align=left>Unix timestamp of the creation singing time of the JWT</td> </tr> <tr> <td align=left>iss</td> <td align=left><code>"http://localhost:50003"</code></td> <td align=left>String which represents the requesting party</td> </tr> <tr> <td align=left>sub</td> <td align=left><code>"77479219772321307"</code></td> <td align=left>The subject ID of the service user, normally the <code>userId</code> from the json key file</td> </tr> </table> </div></div><div class=code><div class=""><pre class="language-undefined"><code>{
	<span class=hljs-attr>"iss"</span>: <span class=hljs-string>"http://localhost:50003"</span>,
	<span class=hljs-attr>"sub"</span>: <span class=hljs-string>"77479219772321307"</span>,
	<span class=hljs-attr>"aud"</span>: <span class=hljs-string>"https://issuer.zitadel.ch"</span>,
	<span class=hljs-attr>"exp"</span>: <span class=hljs-number>1605183582</span>,
	<span class=hljs-attr>"iat"</span>: <span class=hljs-number>1605179982</span>
}</code></pre></div></div></div><div class=side-by-side><div class=copy><p>Access Token Request</p> <div class=table-wrapper> <table> <thead> <tr> <th align=left>Parameter</th> <th align=left>Example</th> <th align=left>Description</th> </tr> </thead> <tr> <td align=left>Content-Type</td> <td align=left><code>application/x-www-form-urlencoded</code></td> <td align=left></td> </tr> <tr> <td align=left>grant_type</td> <td align=left><code>urn:ietf:params:oauth:grant-type:jwt-bearer</code></td> <td align=left>Using JWTs as Authorization Grants</td> </tr> <tr> <td align=left>assertion</td> <td align=left><code>eyJhbGciOiJSUzI1Ni...</code></td> <td align=left>The base64 encoded JWT created above</td> </tr> <tr> <td align=left>scope</td> <td align=left><code>openid profile email urn:zitadel:iam:org:project:id:69234237810729019:aud</code></td> <td align=left>Scopes you would like to request from ZITADEL</td> </tr> </table> </div></div><div class=code><div class=""><pre class="language-undefined"><code>curl --request POST \
  --url https://api.zitadel.ch/oauth/v2/token \
  --header <span class=hljs-string>'Content-Type: application/x-www-form-urlencoded'</span> \
  --data grant_type=urn:ietf:params:oauth:grant-type:jwt-bearer \
  --data assertion=eyJhbGciOiJSUzI1Ni...
  --data scope=openid profile email address</code></pre></div></div></div> <h5> <span class=offset-anchor id=false data-scrollignore></span> <a href=documentation#false class=anchor aria-hidden=true> <i class="las la-link"></i> </a> Using JWTs for Client Authentication </h5><blockquote> <p>Not yet supported</p> </blockquote> <h4> <span class=offset-anchor id=Token_Exchange></span> <a href=documentation#Token_Exchange class=anchor aria-hidden=true> <i class="las la-link"></i> </a> Token Exchange </h4><p><strong>Link to spec.</strong> <a href=https://tools.ietf.org/html/rfc8693 target=_blank>OAuth 2.0 Token Exchange</a></p> <h3> <span class=offset-anchor id=Device_Authorization></span> <a href=documentation#Device_Authorization class=anchor aria-hidden=true> <i class="las la-link"></i> </a> Device Authorization </h3><p><strong>Link to spec.</strong> <a href=https://tools.ietf.org/html/rfc8628 target=_blank>OAuth 2.0 Device Authorization Grant</a></p> <h3> <span class=offset-anchor id=Not_Supported_Grant_Types></span> <a href=documentation#Not_Supported_Grant_Types class=anchor aria-hidden=true> <i class="las la-link"></i> </a> Not Supported Grant Types </h3> <h4> <span class=offset-anchor id=Resource_Owner_Password_Credentials></span> <a href=documentation#Resource_Owner_Password_Credentials class=anchor aria-hidden=true> <i class="las la-link"></i> </a> Resource Owner Password Credentials </h4><blockquote> <p>Due to growing security concerns we do not support this grant type. With OAuth 2.1 it looks like this grant will be removed.</p> </blockquote> <p><strong>Link to spec.</strong> <a href=https://tools.ietf.org/html/rfc6749#section-1.3.3 target=_blank>OThe OAuth 2.0 Authorization Framework Section 1.3.3</a></p> <h4> <span class=offset-anchor id=Security_Assertion_Markup_Language_SAML_2_0_Profile></span> <a href=documentation#Security_Assertion_Markup_Language_SAML_2_0_Profile class=anchor aria-hidden=true> <i class="las la-link"></i> </a> Security Assertion Markup Language (SAML) 2.0 Profile </h4><p><strong>Link to spec.</strong> <a href=https://tools.ietf.org/html/rfc7522 target=_blank>Security Assertion Markup Language (SAML) 2.0 Profile for OAuth 2.0 Client Authentication and Authorization Grants</a></p> </section></div> <div class="svelte-fr1szm overlay"></div> <aside class="svelte-fr1szm sidebar-container"><div class="svelte-fr1szm sidebar"><a href=. class="svelte-fr1szm home" title="Zitadel Docs" rel=prefetch><img alt=zitadel-logo src=logos/zitadel-logo-light.svg class=svelte-fr1szm> <span class=svelte-fr1szm>DOCS</span></a> <button class="svelte-5en90e search-trigger"><i class="las la-search svelte-5en90e"></i> <span class=svelte-5en90e>Search for anything</span> <span class="svelte-5en90e fill-space"></span> <span class="svelte-5en90e strg">Ctrl F</span></button> <ul class="svelte-7kfwfv reference-toc"><li class=svelte-7kfwfv><a href=documentation#Overview class="svelte-7kfwfv section">Overview </a> <li class=svelte-7kfwfv><a href=documentation#Principles class="svelte-7kfwfv section">Principles </a> <a href=documentation#ZITADEL_engineering_and_design_principles class="svelte-7kfwfv subsection" data-level=3>ZITADEL engineering and design principles </a> <li class=svelte-7kfwfv><a href=documentation#Architecture class="svelte-7kfwfv section">Architecture </a> <a href=documentation#Software_Architecture class="svelte-7kfwfv subsection" data-level=3>Software Architecture </a> <a href=documentation#Component_Command_Side class="svelte-7kfwfv subsection" data-level=4>Component Command Side </a> <a href=documentation#Component_Spooler class="svelte-7kfwfv subsection" data-level=4>Component Spooler </a> <a href=documentation#Component_Query_Side class="svelte-7kfwfv subsection" data-level=4>Component Query Side </a> <a href=documentation#Component_HTTP_Server class="svelte-7kfwfv subsection" data-level=4>Component HTTP Server </a> <a href=documentation#Cluster_Architecture class="svelte-7kfwfv subsection" data-level=3>Cluster Architecture </a> <a href=documentation#Multi_Cluster_Architecture class="svelte-7kfwfv subsection" data-level=3>Multi Cluster Architecture </a> <li class=svelte-7kfwfv><a href=documentation#OpenID_Connect_1_0_and_OAuth_2_0 class="svelte-7kfwfv section">OpenID Connect 1.0 & OAuth 2.0 </a> <a href=documentation#Endpoints_and_Domains class="svelte-7kfwfv subsection" data-level=3>Endpoints and Domains </a> <a href=documentation#OpenID_Connect_1_0_Discovery class="svelte-7kfwfv subsection" data-level=4>OpenID Connect 1.0 Discovery </a> <a href=documentation#authorization_endpoint class="svelte-7kfwfv subsection" data-level=4>authorization_endpoint </a> <a href=documentation#token_endpoint class="svelte-7kfwfv subsection" data-level=4>token_endpoint </a> <a href=documentation#userinfo_endpoint class="svelte-7kfwfv subsection" data-level=4>userinfo_endpoint </a> <a href=documentation#end_session_endpoint class="svelte-7kfwfv subsection" data-level=4>end_session_endpoint </a> <a href=documentation#jwks_uri class="svelte-7kfwfv subsection" data-level=4>jwks_uri </a> <a href=documentation#OAuth_2_0_Metadata class="svelte-7kfwfv subsection" data-level=4>OAuth 2.0 Metadata </a> <a href=documentation#Scopes class="svelte-7kfwfv subsection" data-level=3>Scopes </a> <a href=documentation#Standard_Scopes class="svelte-7kfwfv subsection" data-level=4>Standard Scopes </a> <a href=documentation#Custom_Scopes class="svelte-7kfwfv subsection" data-level=4>Custom Scopes </a> <a href=documentation#Reserved_Scopes class="svelte-7kfwfv subsection" data-level=4>Reserved Scopes </a> <a href=documentation#Claims class="svelte-7kfwfv subsection" data-level=3>Claims </a> <a href=documentation#Standard_Claims class="svelte-7kfwfv subsection" data-level=4>Standard Claims </a> <a href=documentation#Custom_Claims class="svelte-7kfwfv subsection" data-level=4>Custom Claims </a> <a href=documentation#Reserved_Claims class="svelte-7kfwfv subsection" data-level=4>Reserved Claims </a> <a href=documentation#Grant_Types class="svelte-7kfwfv subsection" data-level=3>Grant Types </a> <a href=documentation#Authorization_Code class="svelte-7kfwfv subsection" data-level=4>Authorization Code </a> <a href=documentation#Proof_Key_for_Code_Exchange class="svelte-7kfwfv subsection" data-level=4>Proof Key for Code Exchange </a> <a href=documentation#Implicit class="svelte-7kfwfv subsection" data-level=4>Implicit </a> <a href=documentation#Client_Credentials class="svelte-7kfwfv subsection" data-level=4>Client Credentials </a> <a href=documentation#Refresh_Token class="svelte-7kfwfv subsection" data-level=4>Refresh Token </a> <a href=documentation#JSON_Web_Token_JWT_Profile class="svelte-7kfwfv subsection" data-level=4>JSON Web Token (JWT) Profile </a> <a href=documentation#Token_Exchange class="svelte-7kfwfv subsection" data-level=4>Token Exchange </a> <a href=documentation#Device_Authorization class="svelte-7kfwfv subsection" data-level=3>Device Authorization </a> <a href=documentation#Not_Supported_Grant_Types class="svelte-7kfwfv subsection" data-level=3>Not Supported Grant Types </a> <a href=documentation#Resource_Owner_Password_Credentials class="svelte-7kfwfv subsection" data-level=4>Resource Owner Password Credentials </a> <a href=documentation#Security_Assertion_Markup_Language_SAML_2_0_Profile class="svelte-7kfwfv subsection" data-level=4>Security Assertion Markup Language (SAML) 2.0 Profile </a> </ul> <div class="svelte-u5u9kq language-switcher"><button class=svelte-u5u9kq>Deutsch</button><button class="svelte-u5u9kq current" disabled>English</button></div></div> <button class=svelte-fr1szm><i class="las la-bars" style=font-size:20px;height:20px><use xlink:href="#las la-bars"></use></i></button></aside> <div class=pswp aria-hidden=true role=dialog tabindex=-1> <div class=pswp__bg></div> <div class=pswp__scroll-wrap> <div class=pswp__container><div class=pswp__item></div> <div class=pswp__item></div> <div class=pswp__item></div></div> <div class="pswp__ui pswp__ui--hidden"><div class=pswp__top-bar> <div class=pswp__counter></div> <button class="pswp__button pswp__button--close" title="Close (Esc)"></button> <button class="pswp__button pswp__button--share" title=Share></button> <button class="pswp__button pswp__button--fs" title="Toggle fullscreen"></button> <button class="pswp__button pswp__button--zoom" title="Zoom in/out"></button> <div class=pswp__preloader><div class=pswp__preloader__icn><div class=pswp__preloader__cut><div class=pswp__preloader__donut></div></div></div></div></div> <div class="pswp__share-modal pswp__share-modal--hidden pswp__single-tap"><div class=pswp__share-tooltip></div></div> <button class="pswp__button pswp__button--arrow--left" title="Previous (arrow left)"></button> <button class="pswp__button pswp__button--arrow--right" title="Next (arrow right)"></button> <div class=pswp__caption><div class=pswp__caption__center></div></div></div></div></div></main></div> <script>__SAPPER__={baseUrl:"",preloaded:[void 0,(function(a,b,c,d,e,f,g,h,i,j,k,l,m){return {sections:[{html:"\u003Cblockquote\u003E\n\u003Cp\u003EAll documentations are under active work and subject to change soon!\u003C\u002Fp\u003E\n\u003C\u002Fblockquote\u003E\n\u003Cp\u003EThis part of the \u003Cstrong\u003EZITADEL\u003C\u002Fstrong\u003E documentation comprises three major subject areas:\u003C\u002Fp\u003E\n\u003Col\u003E\n\u003Cli\u003EPrinciples\u003C\u002Fli\u003E\n\u003Cli\u003EArchitecture\u003C\u002Fli\u003E\n\u003Cli\u003EProtocols\u003C\u002Fli\u003E\n\u003C\u002Fol\u003E\n\u003Cp\u003EPlease be reminded that ZITADEL is open source — and so is the documentation. Should you happen to stumble over an incorrectness, a spelling mistake, a hard-to-understand text passage, please don’t hesitate to leave a comment or propose a corresponding change.\u003C\u002Fp\u003E\n",metadata:{title:c},subsections:[],slug:c,file:"00-overview.en.md"},{html:"\n\t\t\t\t\t\u003Ch3\u003E\n\t\t\t\t\t\t\u003Cspan id=\"ZITADEL_engineering_and_design_principles\" class=\"offset-anchor\" \u003E\u003C\u002Fspan\u003E\n\t\t\t\t\t\t\u003Ca href=\"documentation#ZITADEL_engineering_and_design_principles\" class=\"anchor\" aria-hidden=\"true\"\u003E \u003Ci class=\"las la-link\"\u003E\u003C\u002Fi\u003E \u003C\u002Fa\u003E\n\t\t\t\t\t\tZITADEL engineering and design principles\n\t\t\t\t\t\u003C\u002Fh3\u003E\u003Cul\u003E\n\u003Cli\u003EBe transparent about your decisions\u003C\u002Fli\u003E\n\u003Cli\u003EEmbrace stateless application design\u003C\u002Fli\u003E\n\u003Cli\u003ESystem of records is the event store\u003C\u002Fli\u003E\n\u003Cli\u003EEverything else needs to be able to be regenerated\u003C\u002Fli\u003E\n\u003Cli\u003ETry not so solve complex problems outside of the IAM Domain\u003C\u002Fli\u003E\n\u003Cli\u003EUse a scalable storage for the event store and read models\u003C\u002Fli\u003E\n\u003Cli\u003ETry to be idempotent whenever possible\u003C\u002Fli\u003E\n\u003Cli\u003EReduce necessity of external systems or dependencies as much as possible\u003C\u002Fli\u003E\n\u003Cli\u003EEmbrace automation\u003C\u002Fli\u003E\n\u003Cli\u003EDesign API first\u003C\u002Fli\u003E\n\u003Cli\u003EOptimize all components for day-two operations\u003C\u002Fli\u003E\n\u003Cli\u003EUse only open source projects with permissive licenses\u003C\u002Fli\u003E\n\u003Cli\u003EDon&#39;t roll your own crypto algorithm\u003C\u002Fli\u003E\n\u003Cli\u003EEmbrace (industry) standard as much as possible\u003C\u002Fli\u003E\n\u003Cli\u003EMake use of platform features\u003C\u002Fli\u003E\n\u003Cli\u003EBe able to run with a CDN and WAF\u003C\u002Fli\u003E\n\u003Cli\u003EReleases utilized semantic versioning and release whenever feasible\u003C\u002Fli\u003E\n\u003C\u002Ful\u003E\n",metadata:{title:d},subsections:[{slug:"ZITADEL_engineering_and_design_principles",title:"ZITADEL engineering and design principles",level:b}],slug:d,file:"01-priciples.en.md"},{html:"\u003Cblockquote\u003E\n\u003Cp\u003EImages in better quality follow soon.\u003C\u002Fp\u003E\n\u003C\u002Fblockquote\u003E\n\n\t\t\t\t\t\u003Ch3\u003E\n\t\t\t\t\t\t\u003Cspan id=\"Software_Architecture\" class=\"offset-anchor\" \u003E\u003C\u002Fspan\u003E\n\t\t\t\t\t\t\u003Ca href=\"documentation#Software_Architecture\" class=\"anchor\" aria-hidden=\"true\"\u003E \u003Ci class=\"las la-link\"\u003E\u003C\u002Fi\u003E \u003C\u002Fa\u003E\n\t\t\t\t\t\tSoftware Architecture\n\t\t\t\t\t\u003C\u002Fh3\u003E\u003Cp\u003E\u003Cstrong\u003EZITADEL\u003C\u002Fstrong\u003E is built with two essential patterns. Eventsourcing and CQRS. Due to the nature of eventsourcing \u003Cstrong\u003EZITADEL\u003C\u002Fstrong\u003E provides the unique capability to generate a strong audit trail of ALL the things that happen to its resources, without compromising on storage cost or audit trail length.\u003C\u002Fp\u003E\n\u003Cp\u003EThe combination with CQRS makes \u003Cstrong\u003EZITADEL\u003C\u002Fstrong\u003E eventual consistent which, from our perspective is a great benefit. It allows us to build a SOR (Source of Records) which is the one single point of truth for all computed states. The SOR needs to be transaction safe to make sure all operations are in order.\u003C\u002Fp\u003E\n\u003Cp\u003EEach \u003Cstrong\u003EZITADEL\u003C\u002Fstrong\u003E contains all components of the IAM, from serving as API, rendering \u002F serving GUI&#39;s, background processing of events and task or being a GITOPS style operator. This AiO (All in One) approach makes scaling from a single machine to a multi region (multi cluster) seamless.\u003C\u002Fp\u003E\n\u003Cdiv class=\"zitadel-gallery\" itemscope itemtype=\"http:\u002F\u002Fschema.org\u002FImageGallery\"\u003E\n    \u003Cfigure itemprop=\"associatedMedia\" itemscope itemtype=\"http:\u002F\u002Fschema.org\u002FImageObject\"\u003E\n        \u003Ca href=\"img\u002Fzitadel_software_architecture.png\" itemprop=\"contentUrl\" data-size=\"1530x681\"\u003E\n            \u003Cimg src=\"img\u002Fzitadel_software_architecture.png\" itemprop=\"thumbnail\" alt=\"Software Architecture\" \u002F\u003E\n        \u003C\u002Fa\u003E\n        \u003Cfigcaption itemprop=\"caption description\"\u003ESoftware Architecture\u003C\u002Ffigcaption\u003E\n    \u003C\u002Ffigure\u003E\n\u003C\u002Fdiv\u003E\n\n\n\t\t\t\t\t\u003Ch4\u003E\n\t\t\t\t\t\t\u003Cspan id=\"Component_Command_Side\" class=\"offset-anchor\" \u003E\u003C\u002Fspan\u003E\n\t\t\t\t\t\t\u003Ca href=\"documentation#Component_Command_Side\" class=\"anchor\" aria-hidden=\"true\"\u003E \u003Ci class=\"las la-link\"\u003E\u003C\u002Fi\u003E \u003C\u002Fa\u003E\n\t\t\t\t\t\tComponent Command Side\n\t\t\t\t\t\u003C\u002Fh4\u003E\u003Cp\u003EThe \u003Cstrong\u003Ecommand handler\u003C\u002Fstrong\u003E receives all operations who alter a IAM resource. For example if a user changes his name.\nThis information is then passed to \u003Cstrong\u003Ecommand validation\u003C\u002Fstrong\u003E for processing of the business logic, for example to make sure that the user actually can change his name. If this succeeds all generated events are inserted into the eventstore when required all within one transaction.\u003C\u002Fp\u003E\n\u003Cul\u003E\n\u003Cli\u003ETransaction safety is a MUST\u003C\u002Fli\u003E\n\u003Cli\u003EAvailability MUST be high\u003C\u002Fli\u003E\n\u003C\u002Ful\u003E\n\u003Cblockquote\u003E\n\u003Cp\u003EWhen we classify this with the CAP theorem we would choose \u003Cstrong\u003EConsistent\u003C\u002Fstrong\u003E and \u003Cstrong\u003EAvailable\u003C\u002Fstrong\u003E but leave \u003Cstrong\u003EPerformance\u003C\u002Fstrong\u003E aside.\u003C\u002Fp\u003E\n\u003C\u002Fblockquote\u003E\n\n\t\t\t\t\t\u003Ch4\u003E\n\t\t\t\t\t\t\u003Cspan id=\"Component_Spooler\" class=\"offset-anchor\" \u003E\u003C\u002Fspan\u003E\n\t\t\t\t\t\t\u003Ca href=\"documentation#Component_Spooler\" class=\"anchor\" aria-hidden=\"true\"\u003E \u003Ci class=\"las la-link\"\u003E\u003C\u002Fi\u003E \u003C\u002Fa\u003E\n\t\t\t\t\t\tComponent Spooler\n\t\t\t\t\t\u003C\u002Fh4\u003E\u003Cp\u003EThe spoolers job is it to keep a query view up-to-date or at least look that it does not have a too big lag behind the eventstore.\nEach query view has its own spooler who is responsible to look for the events who are relevant to generate the query view. It does this by triggering the relevant projection.\nSpoolers are especially necessary where someone can query datasets instead of single ids.\u003C\u002Fp\u003E\n\u003Cblockquote\u003E\n\u003Cp\u003EThe query side has the option to dynamically check the eventstore for newer events on a certain id, see query side for more information\nEach view can have exactly one spooler, but spoolers are dynamically leader elected, so even if a spooler crashes it will be replaced in a short amount of time.\u003C\u002Fp\u003E\n\u003C\u002Fblockquote\u003E\n\n\t\t\t\t\t\u003Ch4\u003E\n\t\t\t\t\t\t\u003Cspan id=\"Component_Query_Side\" class=\"offset-anchor\" \u003E\u003C\u002Fspan\u003E\n\t\t\t\t\t\t\u003Ca href=\"documentation#Component_Query_Side\" class=\"anchor\" aria-hidden=\"true\"\u003E \u003Ci class=\"las la-link\"\u003E\u003C\u002Fi\u003E \u003C\u002Fa\u003E\n\t\t\t\t\t\tComponent Query Side\n\t\t\t\t\t\u003C\u002Fh4\u003E\u003Cp\u003EThe query handler receives all read relevant operations. These can either be query or simple \u003Ccode\u003EgetById\u003C\u002Fcode\u003E calls.\nWhen receiving a query it will proceed by passing this to the repository which will call the database and return the dataset.\nIf a request calls for a specific id the call will, most of the times, be revalidated against the eventstore. This is achieved by triggering the projection to make sure that the last sequence of a id is loaded into the query view.\u003C\u002Fp\u003E\n\u003Cul\u003E\n\u003Cli\u003EEasy to query\u003C\u002Fli\u003E\n\u003Cli\u003EShort response times (80%of queries below 100ms on the api server)\u003C\u002Fli\u003E\n\u003Cli\u003EAvailability MUST be high\u003C\u002Fli\u003E\n\u003C\u002Ful\u003E\n\u003Cblockquote\u003E\n\u003Cp\u003EWhen we classify this with the CAP theorem we would choose \u003Cstrong\u003EAvailable\u003C\u002Fstrong\u003E and \u003Cstrong\u003EPerformance\u003C\u002Fstrong\u003E but leave \u003Cstrong\u003EConsistent\u003C\u002Fstrong\u003E aside\nTODO explain more here\u003C\u002Fp\u003E\n\u003C\u002Fblockquote\u003E\n\n\t\t\t\t\t\u003Ch4\u003E\n\t\t\t\t\t\t\u003Cspan id=\"Component_HTTP_Server\" class=\"offset-anchor\" \u003E\u003C\u002Fspan\u003E\n\t\t\t\t\t\t\u003Ca href=\"documentation#Component_HTTP_Server\" class=\"anchor\" aria-hidden=\"true\"\u003E \u003Ci class=\"las la-link\"\u003E\u003C\u002Fi\u003E \u003C\u002Fa\u003E\n\t\t\t\t\t\tComponent HTTP Server\n\t\t\t\t\t\u003C\u002Fh4\u003E\u003Cp\u003EThe http server is responsible for serving the management GUI called \u003Cstrong\u003EZITADEL Console\u003C\u002Fstrong\u003E, serving the static assets and as well rendering server side html (login, password-reset, verification, ...)\u003C\u002Fp\u003E\n\n\t\t\t\t\t\u003Ch3\u003E\n\t\t\t\t\t\t\u003Cspan id=\"Cluster_Architecture\" class=\"offset-anchor\" \u003E\u003C\u002Fspan\u003E\n\t\t\t\t\t\t\u003Ca href=\"documentation#Cluster_Architecture\" class=\"anchor\" aria-hidden=\"true\"\u003E \u003Ci class=\"las la-link\"\u003E\u003C\u002Fi\u003E \u003C\u002Fa\u003E\n\t\t\t\t\t\tCluster Architecture\n\t\t\t\t\t\u003C\u002Fh3\u003E\u003Cp\u003EA \u003Cstrong\u003EZITADEL Cluster\u003C\u002Fstrong\u003E is a highly available IAM system with each component critical for serving traffic laid out at least three times.\nAs our storage (CockroachDB) relies on Raft it is also necessary to always utilizes odd numbers to address for &quot;split brain&quot; scenarios.\nHence our reference design is to have three application nodes and three Storage Nodes.\u003C\u002Fp\u003E\n\u003Cp\u003EIf you deploy \u003Cstrong\u003EZITADEL\u003C\u002Fstrong\u003E with our GITOPS Tooling \u003Ca href=\"https:\u002F\u002Fgithub.com\u002Fcaos\u002Forbos\" target=\"_blank\"\u003E\u003Cstrong\u003EORBOS\u003C\u002Fstrong\u003E\u003C\u002Fa\u003E we create 7 seven nodes. One management, three application and three storage nodes.\u003C\u002Fp\u003E\n\u003Cblockquote\u003E\n\u003Cp\u003EYou can horizontaly scale zitadel, but we recommend to use multiple cluster instead to reduce the blast radius from impacts to a single cluster\u003C\u002Fp\u003E\n\u003C\u002Fblockquote\u003E\n\u003Cdiv class=\"zitadel-gallery\" itemscope itemtype=\"http:\u002F\u002Fschema.org\u002FImageGallery\"\u003E\n    \u003Cfigure itemprop=\"associatedMedia\" itemscope itemtype=\"http:\u002F\u002Fschema.org\u002FImageObject\"\u003E\n        \u003Ca href=\"img\u002Fzitadel_cluster_architecture.png\" itemprop=\"contentUrl\" data-size=\"1530x681\"\u003E\n            \u003Cimg src=\"img\u002Fzitadel_cluster_architecture.png\" itemprop=\"thumbnail\" alt=\"Cluster Architecture\" \u002F\u003E\n        \u003C\u002Fa\u003E\n        \u003Cfigcaption itemprop=\"caption description\"\u003ECluster Architecture\u003C\u002Ffigcaption\u003E\n    \u003C\u002Ffigure\u003E\n\u003C\u002Fdiv\u003E\n\n\n\t\t\t\t\t\u003Ch3\u003E\n\t\t\t\t\t\t\u003Cspan id=\"Multi_Cluster_Architecture\" class=\"offset-anchor\" \u003E\u003C\u002Fspan\u003E\n\t\t\t\t\t\t\u003Ca href=\"documentation#Multi_Cluster_Architecture\" class=\"anchor\" aria-hidden=\"true\"\u003E \u003Ci class=\"las la-link\"\u003E\u003C\u002Fi\u003E \u003C\u002Fa\u003E\n\t\t\t\t\t\tMulti Cluster Architecture\n\t\t\t\t\t\u003C\u002Fh3\u003E\u003Cp\u003ETo scale \u003Cstrong\u003EZITADEL\u003C\u002Fstrong\u003E is recommend to create smaller clusters, see cluster architecture and then create a fabric which interconnects the database.\nIn our reference design we recommend to create a cluster per cloud provider or availability zone and to group them into regions.\u003C\u002Fp\u003E\n\u003Cp\u003EFor example, you can run three cluster for the region switzerland. On with GCE, one with cloudscale and one with inventx.\u003C\u002Fp\u003E\n\u003Cp\u003EWith this design even the outage of a whole data-center would have a minimal impact as all data is still available at the other two locations.\u003C\u002Fp\u003E\n\u003Cblockquote\u003E\n\u003Cp\u003ECockroach needs to be configured with locality flags to proper distribute data over the zones\nEast - West connectivity for the database can be solved at you discretion. We recommend to expose the public ips and run traffic directly without any VPN or Mesh\nUse MTLS in combination with IP Allowlist in the firewalls!\u003C\u002Fp\u003E\n\u003C\u002Fblockquote\u003E\n\u003Cdiv class=\"zitadel-gallery\" itemscope itemtype=\"http:\u002F\u002Fschema.org\u002FImageGallery\"\u003E\n    \u003Cfigure itemprop=\"associatedMedia\" itemscope itemtype=\"http:\u002F\u002Fschema.org\u002FImageObject\"\u003E\n        \u003Ca href=\"img\u002Fzitadel_multicluster_architecture.png\" itemprop=\"contentUrl\" data-size=\"1530x681\"\u003E\n            \u003Cimg src=\"img\u002Fzitadel_multicluster_architecture.png\" itemprop=\"thumbnail\" alt=\"Multi-Cluster Architecture\" \u002F\u003E\n        \u003C\u002Fa\u003E\n        \u003Cfigcaption itemprop=\"caption description\"\u003EMulti-Cluster Architecture\u003C\u002Ffigcaption\u003E\n    \u003C\u002Ffigure\u003E\n\u003C\u002Fdiv\u003E\n",metadata:{title:e},subsections:[{slug:"Software_Architecture",title:"Software Architecture",level:b},{slug:"Component_Command_Side",title:"Component Command Side",level:a},{slug:"Component_Spooler",title:"Component Spooler",level:a},{slug:"Component_Query_Side",title:"Component Query Side",level:a},{slug:"Component_HTTP_Server",title:"Component HTTP Server",level:a},{slug:"Cluster_Architecture",title:"Cluster Architecture",level:b},{slug:"Multi_Cluster_Architecture",title:"Multi Cluster Architecture",level:b}],slug:e,file:"02-architecture.en.md"},{html:"\n\t\t\t\t\t\u003Ch3\u003E\n\t\t\t\t\t\t\u003Cspan id=\"Endpoints_and_Domains\" class=\"offset-anchor\" \u003E\u003C\u002Fspan\u003E\n\t\t\t\t\t\t\u003Ca href=\"documentation#Endpoints_and_Domains\" class=\"anchor\" aria-hidden=\"true\"\u003E \u003Ci class=\"las la-link\"\u003E\u003C\u002Fi\u003E \u003C\u002Fa\u003E\n\t\t\t\t\t\tEndpoints and Domains\n\t\t\t\t\t\u003C\u002Fh3\u003E\u003Cp\u003EThis chapter documents the \u003Ca href=\"https:\u002F\u002Fopenid.net\u002Fconnect\u002F\" target=\"_blank\"\u003EOpenID Connect 1.0\u003C\u002Fa\u003E and \u003Ca href=\"https:\u002F\u002Foauth.net\u002F2\u002F\" target=\"_blank\"\u003EOAuth 2.0\u003C\u002Fa\u003E features provided by \u003Cstrong\u003EZITADEL\u003C\u002Fstrong\u003E.\u003C\u002Fp\u003E\n\u003Cp\u003EUnder normal circumstances \u003Cstrong\u003EZITADEL\u003C\u002Fstrong\u003E need four domain names to operate properly.\u003C\u002Fp\u003E\n\u003Cdiv class=\"table-wrapper\"\u003E\n\u003Ctable\u003E\n\u003Cthead\u003E\n\u003Ctr\u003E\n\u003Cth align=\"left\"\u003EDomain Name\u003C\u002Fth\u003E\n\u003Cth align=\"left\"\u003EExample\u003C\u002Fth\u003E\n\u003Cth\u003EDescription\u003C\u002Fth\u003E\n\u003C\u002Ftr\u003E\n\u003C\u002Fthead\u003E\n\u003Ctbody\u003E\u003Ctr\u003E\n\u003Ctd align=\"left\"\u003Eissuer\u003C\u002Ftd\u003E\n\u003Ctd align=\"left\"\u003E\u003Ccode\u003Eissuer.zitadel.ch\u003C\u002Fcode\u003E\u003C\u002Ftd\u003E\n\u003Ctd\u003EProvides the \u003Ca href=\"#openid-connect-10-discovery\"\u003EOpenID Connect 1.0 Discovery Endpoint\u003C\u002Fa\u003E\u003C\u002Ftd\u003E\n\u003C\u002Ftr\u003E\n\u003Ctr\u003E\n\u003Ctd align=\"left\"\u003Eapi\u003C\u002Ftd\u003E\n\u003Ctd align=\"left\"\u003E\u003Ccode\u003Eapi.zitadel.ch\u003C\u002Fcode\u003E\u003C\u002Ftd\u003E\n\u003Ctd\u003EAll ZITADEL API&#39;s are located under this domain see \u003Ca href=\"develop#APIs\"\u003EAPI explanation\u003C\u002Fa\u003E for details\u003C\u002Ftd\u003E\n\u003C\u002Ftr\u003E\n\u003Ctr\u003E\n\u003Ctd align=\"left\"\u003Elogin\u003C\u002Ftd\u003E\n\u003Ctd align=\"left\"\u003E\u003Ccode\u003Eaccounts.zitadel.ch\u003C\u002Fcode\u003E\u003C\u002Ftd\u003E\n\u003Ctd\u003EThe accounts.* page provides server renderer pages like login and register and as well the authorization_endpoint for OpenID Connect\u003C\u002Ftd\u003E\n\u003C\u002Ftr\u003E\n\u003Ctr\u003E\n\u003Ctd align=\"left\"\u003Econsole\u003C\u002Ftd\u003E\n\u003Ctd align=\"left\"\u003E\u003Ccode\u003Econsole.zitadel.ch\u003C\u002Fcode\u003E\u003C\u002Ftd\u003E\n\u003Ctd\u003EWith the console.* domain we serve the assets for the management gui\u003C\u002Ftd\u003E\n\u003C\u002Ftr\u003E\n\u003C\u002Ftbody\u003E\u003C\u002Ftable\u003E\n\u003C\u002Fdiv\u003E\n\t\t\t\t\t\u003Ch4\u003E\n\t\t\t\t\t\t\u003Cspan id=\"OpenID_Connect_1_0_Discovery\" class=\"offset-anchor\" \u003E\u003C\u002Fspan\u003E\n\t\t\t\t\t\t\u003Ca href=\"documentation#OpenID_Connect_1_0_Discovery\" class=\"anchor\" aria-hidden=\"true\"\u003E \u003Ci class=\"las la-link\"\u003E\u003C\u002Fi\u003E \u003C\u002Fa\u003E\n\t\t\t\t\t\tOpenID Connect 1.0 Discovery\n\t\t\t\t\t\u003C\u002Fh4\u003E\u003Cp\u003EThe OpenID Connect Discovery Endpoint is located within the issuer domain.\nFor example with \u003Ca href=\"zitadel.ch\"\u003Ezitadel.ch\u003C\u002Fa\u003E this would be the domain \u003Ca href=\"issuer.zitadel.ch\"\u003Eissuer.zitadel.ch\u003C\u002Fa\u003E. This would give us \u003Ca href=\"https:\u002F\u002Fissuer.zitadel.ch\u002F.well-known\u002Fopenid-configuration\" target=\"_blank\"\u003Ehttps:\u002F\u002Fissuer.zitadel.ch\u002F.well-known\u002Fopenid-configuration\u003C\u002Fa\u003E.\u003C\u002Fp\u003E\n\u003Cp\u003E\u003Cstrong\u003ELink to spec.\u003C\u002Fstrong\u003E \u003Ca href=\"https:\u002F\u002Fopenid.net\u002Fspecs\u002Fopenid-connect-discovery-1_0.html\" target=\"_blank\"\u003EOpenID Connect Discovery 1.0 incorporating errata set 1\u003C\u002Fa\u003E\u003C\u002Fp\u003E\n\n\t\t\t\t\t\u003Ch4\u003E\n\t\t\t\t\t\t\u003Cspan id=\"authorization_endpoint\" class=\"offset-anchor\" \u003E\u003C\u002Fspan\u003E\n\t\t\t\t\t\t\u003Ca href=\"documentation#authorization_endpoint\" class=\"anchor\" aria-hidden=\"true\"\u003E \u003Ci class=\"las la-link\"\u003E\u003C\u002Fi\u003E \u003C\u002Fa\u003E\n\t\t\t\t\t\tauthorization_endpoint\n\t\t\t\t\t\u003C\u002Fh4\u003E\u003Cp\u003E\u003Ca href=\"https:\u002F\u002Faccounts.zitadel.ch\u002Foauth\u002Fv2\u002Fauthorize\" target=\"_blank\"\u003Ehttps:\u002F\u002Faccounts.zitadel.ch\u002Foauth\u002Fv2\u002Fauthorize\u003C\u002Fa\u003E\u003C\u002Fp\u003E\n\u003Cblockquote\u003E\n\u003Cp\u003EThe authorization_endpoint is located with the login page, due to the need of accessing the same cookie domain\u003C\u002Fp\u003E\n\u003C\u002Fblockquote\u003E\n\n\t\t\t\t\t\u003Ch4\u003E\n\t\t\t\t\t\t\u003Cspan id=\"token_endpoint\" class=\"offset-anchor\" \u003E\u003C\u002Fspan\u003E\n\t\t\t\t\t\t\u003Ca href=\"documentation#token_endpoint\" class=\"anchor\" aria-hidden=\"true\"\u003E \u003Ci class=\"las la-link\"\u003E\u003C\u002Fi\u003E \u003C\u002Fa\u003E\n\t\t\t\t\t\ttoken_endpoint\n\t\t\t\t\t\u003C\u002Fh4\u003E\u003Cp\u003E\u003Ca href=\"https:\u002F\u002Fapi.zitadel.ch\u002Foauth\u002Fv2\u002Ftoken\" target=\"_blank\"\u003Ehttps:\u002F\u002Fapi.zitadel.ch\u002Foauth\u002Fv2\u002Ftoken\u003C\u002Fa\u003E\u003C\u002Fp\u003E\n\n\t\t\t\t\t\u003Ch4\u003E\n\t\t\t\t\t\t\u003Cspan id=\"userinfo_endpoint\" class=\"offset-anchor\" \u003E\u003C\u002Fspan\u003E\n\t\t\t\t\t\t\u003Ca href=\"documentation#userinfo_endpoint\" class=\"anchor\" aria-hidden=\"true\"\u003E \u003Ci class=\"las la-link\"\u003E\u003C\u002Fi\u003E \u003C\u002Fa\u003E\n\t\t\t\t\t\tuserinfo_endpoint\n\t\t\t\t\t\u003C\u002Fh4\u003E\u003Cp\u003E\u003Ca href=\"https:\u002F\u002Fapi.zitadel.ch\u002Foauth\u002Fv2\u002Fuserinfo\" target=\"_blank\"\u003Ehttps:\u002F\u002Fapi.zitadel.ch\u002Foauth\u002Fv2\u002Fuserinfo\u003C\u002Fa\u003E\u003C\u002Fp\u003E\n\n\t\t\t\t\t\u003Ch4\u003E\n\t\t\t\t\t\t\u003Cspan id=\"end_session_endpoint\" class=\"offset-anchor\" \u003E\u003C\u002Fspan\u003E\n\t\t\t\t\t\t\u003Ca href=\"documentation#end_session_endpoint\" class=\"anchor\" aria-hidden=\"true\"\u003E \u003Ci class=\"las la-link\"\u003E\u003C\u002Fi\u003E \u003C\u002Fa\u003E\n\t\t\t\t\t\tend_session_endpoint\n\t\t\t\t\t\u003C\u002Fh4\u003E\u003Cp\u003E\u003Ca href=\"https:\u002F\u002Faccounts.zitadel.ch\u002Foauth\u002Fv2\u002Fendsession\" target=\"_blank\"\u003Ehttps:\u002F\u002Faccounts.zitadel.ch\u002Foauth\u002Fv2\u002Fendsession\u003C\u002Fa\u003E\u003C\u002Fp\u003E\n\u003Cblockquote\u003E\n\u003Cp\u003EThe end_session_endpoint is located with the login page, due to the need of accessing the same cookie domain\u003C\u002Fp\u003E\n\u003C\u002Fblockquote\u003E\n\n\t\t\t\t\t\u003Ch4\u003E\n\t\t\t\t\t\t\u003Cspan id=\"jwks_uri\" class=\"offset-anchor\" \u003E\u003C\u002Fspan\u003E\n\t\t\t\t\t\t\u003Ca href=\"documentation#jwks_uri\" class=\"anchor\" aria-hidden=\"true\"\u003E \u003Ci class=\"las la-link\"\u003E\u003C\u002Fi\u003E \u003C\u002Fa\u003E\n\t\t\t\t\t\tjwks_uri\n\t\t\t\t\t\u003C\u002Fh4\u003E\u003Cp\u003E\u003Ca href=\"https:\u002F\u002Fapi.zitadel.ch\u002Foauth\u002Fv2\u002Fkeys\" target=\"_blank\"\u003Ehttps:\u002F\u002Fapi.zitadel.ch\u002Foauth\u002Fv2\u002Fkeys\u003C\u002Fa\u003E\u003C\u002Fp\u003E\n\u003Cblockquote\u003E\n\u003Cp\u003EBe aware that these keys can be rotated without any prior notice. We will however make sure that a proper \u003Ccode\u003Ekid\u003C\u002Fcode\u003E is set with each key!\u003C\u002Fp\u003E\n\u003C\u002Fblockquote\u003E\n\n\t\t\t\t\t\u003Ch4\u003E\n\t\t\t\t\t\t\u003Cspan id=\"OAuth_2_0_Metadata\" class=\"offset-anchor\" \u003E\u003C\u002Fspan\u003E\n\t\t\t\t\t\t\u003Ca href=\"documentation#OAuth_2_0_Metadata\" class=\"anchor\" aria-hidden=\"true\"\u003E \u003Ci class=\"las la-link\"\u003E\u003C\u002Fi\u003E \u003C\u002Fa\u003E\n\t\t\t\t\t\tOAuth 2.0 Metadata\n\t\t\t\t\t\u003C\u002Fh4\u003E\u003Cp\u003E\u003Cstrong\u003EZITADEL\u003C\u002Fstrong\u003E does not yet provide a OAuth 2.0 Metadata endpoint but instead provides a \u003Ca href=\"#openid-connect-10-discovery\"\u003EOpenID Connect Discovery Endpoint\u003C\u002Fa\u003E.\u003C\u002Fp\u003E\n\n\t\t\t\t\t\u003Ch3\u003E\n\t\t\t\t\t\t\u003Cspan id=\"Scopes\" class=\"offset-anchor\" \u003E\u003C\u002Fspan\u003E\n\t\t\t\t\t\t\u003Ca href=\"documentation#Scopes\" class=\"anchor\" aria-hidden=\"true\"\u003E \u003Ci class=\"las la-link\"\u003E\u003C\u002Fi\u003E \u003C\u002Fa\u003E\n\t\t\t\t\t\tScopes\n\t\t\t\t\t\u003C\u002Fh3\u003E\u003Cp\u003EZITADEL supports the usage of scopes as way of requesting information from the IAM and also instruct ZITADEL to do certain operations.\u003C\u002Fp\u003E\n\n\t\t\t\t\t\u003Ch4\u003E\n\t\t\t\t\t\t\u003Cspan id=\"Standard_Scopes\" class=\"offset-anchor\" \u003E\u003C\u002Fspan\u003E\n\t\t\t\t\t\t\u003Ca href=\"documentation#Standard_Scopes\" class=\"anchor\" aria-hidden=\"true\"\u003E \u003Ci class=\"las la-link\"\u003E\u003C\u002Fi\u003E \u003C\u002Fa\u003E\n\t\t\t\t\t\tStandard Scopes\n\t\t\t\t\t\u003C\u002Fh4\u003E\u003Cdiv class=\"table-wrapper\"\u003E\n\u003Ctable\u003E\n\u003Cthead\u003E\n\u003Ctr\u003E\n\u003Cth align=\"left\"\u003EScopes\u003C\u002Fth\u003E\n\u003Cth align=\"left\"\u003EExample\u003C\u002Fth\u003E\n\u003Cth\u003EDescription\u003C\u002Fth\u003E\n\u003C\u002Ftr\u003E\n\u003C\u002Fthead\u003E\n\u003Ctbody\u003E\u003Ctr\u003E\n\u003Ctd align=\"left\"\u003Eopenid\u003C\u002Ftd\u003E\n\u003Ctd align=\"left\"\u003E\u003Ccode\u003Eopenid\u003C\u002Fcode\u003E\u003C\u002Ftd\u003E\n\u003Ctd\u003EWhen using openid connect this is a mandatory scope\u003C\u002Ftd\u003E\n\u003C\u002Ftr\u003E\n\u003Ctr\u003E\n\u003Ctd align=\"left\"\u003Eprofile\u003C\u002Ftd\u003E\n\u003Ctd align=\"left\"\u003E\u003Ccode\u003Eprofile\u003C\u002Fcode\u003E\u003C\u002Ftd\u003E\n\u003Ctd\u003EOptional scope to request the profile of the subject\u003C\u002Ftd\u003E\n\u003C\u002Ftr\u003E\n\u003Ctr\u003E\n\u003Ctd align=\"left\"\u003Eemail\u003C\u002Ftd\u003E\n\u003Ctd align=\"left\"\u003E\u003Ccode\u003Eemail\u003C\u002Fcode\u003E\u003C\u002Ftd\u003E\n\u003Ctd\u003EOptional scope to request the email of the subject\u003C\u002Ftd\u003E\n\u003C\u002Ftr\u003E\n\u003Ctr\u003E\n\u003Ctd align=\"left\"\u003Eaddress\u003C\u002Ftd\u003E\n\u003Ctd align=\"left\"\u003E\u003Ccode\u003Eaddress\u003C\u002Fcode\u003E\u003C\u002Ftd\u003E\n\u003Ctd\u003EOptional scope to request the address of the subject\u003C\u002Ftd\u003E\n\u003C\u002Ftr\u003E\n\u003C\u002Ftbody\u003E\u003C\u002Ftable\u003E\n\u003C\u002Fdiv\u003E\n\t\t\t\t\t\u003Ch4\u003E\n\t\t\t\t\t\t\u003Cspan id=\"Custom_Scopes\" class=\"offset-anchor\" \u003E\u003C\u002Fspan\u003E\n\t\t\t\t\t\t\u003Ca href=\"documentation#Custom_Scopes\" class=\"anchor\" aria-hidden=\"true\"\u003E \u003Ci class=\"las la-link\"\u003E\u003C\u002Fi\u003E \u003C\u002Fa\u003E\n\t\t\t\t\t\tCustom Scopes\n\t\t\t\t\t\u003C\u002Fh4\u003E\u003Cblockquote\u003E\n\u003Cp\u003EThis feature is not yet released\u003C\u002Fp\u003E\n\u003C\u002Fblockquote\u003E\n\n\t\t\t\t\t\u003Ch4\u003E\n\t\t\t\t\t\t\u003Cspan id=\"Reserved_Scopes\" class=\"offset-anchor\" \u003E\u003C\u002Fspan\u003E\n\t\t\t\t\t\t\u003Ca href=\"documentation#Reserved_Scopes\" class=\"anchor\" aria-hidden=\"true\"\u003E \u003Ci class=\"las la-link\"\u003E\u003C\u002Fi\u003E \u003C\u002Fa\u003E\n\t\t\t\t\t\tReserved Scopes\n\t\t\t\t\t\u003C\u002Fh4\u003E\u003Cp\u003EIn addition to the standard compliant scopes we utilize the following scopes.\u003C\u002Fp\u003E\n\u003Cdiv class=\"table-wrapper\"\u003E\n\u003Ctable\u003E\n\u003Cthead\u003E\n\u003Ctr\u003E\n\u003Cth align=\"left\"\u003EScopes\u003C\u002Fth\u003E\n\u003Cth align=\"left\"\u003EExample\u003C\u002Fth\u003E\n\u003Cth\u003EDescription\u003C\u002Fth\u003E\n\u003C\u002Ftr\u003E\n\u003C\u002Fthead\u003E\n\u003Ctbody\u003E\u003Ctr\u003E\n\u003Ctd align=\"left\"\u003Eurn:zitadel:iam:org:project:role:{rolename}\u003C\u002Ftd\u003E\n\u003Ctd align=\"left\"\u003E\u003Ccode\u003Eurn:zitadel:iam:org:project:role:user\u003C\u002Fcode\u003E\u003C\u002Ftd\u003E\n\u003Ctd\u003EBy using this scope a \u003Ca href=\"administrate#clients\"\u003Eclient\u003C\u002Fa\u003E can request the claim urn:zitadel:iam:roles:rolename} to be asserted when possible. As an alternative approach you can enable all \u003Ca href=\"administrate#Roles\"\u003Eroles\u003C\u002Fa\u003E to be asserted from the \u003Ca href=\"administrate#projects\"\u003Eproject\u003C\u002Fa\u003E a \u003Ca href=\"administrate#clients\"\u003Eclient\u003C\u002Fa\u003E belongs to. See details \u003Ca href=\"administrate#RBAC_Settings\"\u003Ehere\u003C\u002Fa\u003E\u003C\u002Ftd\u003E\n\u003C\u002Ftr\u003E\n\u003Ctr\u003E\n\u003Ctd align=\"left\"\u003Eurn:zitadel:iam:org:domain:primary:{domainname}\u003C\u002Ftd\u003E\n\u003Ctd align=\"left\"\u003E\u003Ccode\u003Eurn:zitadel:iam:org:domain:primary:acme.ch\u003C\u002Fcode\u003E\u003C\u002Ftd\u003E\n\u003Ctd\u003EWhen requesting this scope \u003Cstrong\u003EZITADEL\u003C\u002Fstrong\u003E will enforce that the user is a member of the selected organization. If the organization does not exist a failure is displayed\u003C\u002Ftd\u003E\n\u003C\u002Ftr\u003E\n\u003Ctr\u003E\n\u003Ctd align=\"left\"\u003Eurn:zitadel:iam:role:{rolename}\u003C\u002Ftd\u003E\n\u003Ctd align=\"left\"\u003E\u003C\u002Ftd\u003E\n\u003Ctd\u003E\u003C\u002Ftd\u003E\n\u003C\u002Ftr\u003E\n\u003Ctr\u003E\n\u003Ctd align=\"left\"\u003Eurn:zitadel:iam:org:project:id:{projectid}:aud\u003C\u002Ftd\u003E\n\u003Ctd align=\"left\"\u003EZITADEL&#39;s Project id is \u003Ccode\u003Eurn:zitadel:iam:org:project:id:69234237810729019:aud\u003C\u002Fcode\u003E\u003C\u002Ftd\u003E\n\u003Ctd\u003EBy adding this scope, the requested projectid will be added to the audience of the access and id token\u003C\u002Ftd\u003E\n\u003C\u002Ftr\u003E\n\u003C\u002Ftbody\u003E\u003C\u002Ftable\u003E\n\u003C\u002Fdiv\u003E\u003Cblockquote\u003E\n\u003Cp\u003EIf access to ZITADEL&#39;s API&#39;s is needed with a service user the scope \u003Ccode\u003Eurn:zitadel:iam:org:project:id:69234237810729019:aud\u003C\u002Fcode\u003E needs to be used with the JWT Profile request\u003C\u002Fp\u003E\n\u003C\u002Fblockquote\u003E\n\n\t\t\t\t\t\u003Ch3\u003E\n\t\t\t\t\t\t\u003Cspan id=\"Claims\" class=\"offset-anchor\" \u003E\u003C\u002Fspan\u003E\n\t\t\t\t\t\t\u003Ca href=\"documentation#Claims\" class=\"anchor\" aria-hidden=\"true\"\u003E \u003Ci class=\"las la-link\"\u003E\u003C\u002Fi\u003E \u003C\u002Fa\u003E\n\t\t\t\t\t\tClaims\n\t\t\t\t\t\u003C\u002Fh3\u003E\u003Cp\u003EZITADEL asserts claims on different places according to the corresponding specifications or project and clients settings.\nPlease check below the matrix for an overview where which scope is asserted.\u003C\u002Fp\u003E\n\u003Cdiv class=\"table-wrapper\"\u003E\n\u003Ctable\u003E\n\u003Cthead\u003E\n\u003Ctr\u003E\n\u003Cth align=\"left\"\u003EClaims\u003C\u002Fth\u003E\n\u003Cth align=\"left\"\u003EUserinfo\u003C\u002Fth\u003E\n\u003Cth\u003EID Token\u003C\u002Fth\u003E\n\u003Cth\u003EAccess Token\u003C\u002Fth\u003E\n\u003C\u002Ftr\u003E\n\u003C\u002Fthead\u003E\n\u003Ctbody\u003E\u003Ctr\u003E\n\u003Ctd align=\"left\"\u003Eacr\u003C\u002Ftd\u003E\n\u003Ctd align=\"left\"\u003EYes\u003C\u002Ftd\u003E\n\u003Ctd\u003EYes\u003C\u002Ftd\u003E\n\u003Ctd\u003ENo\u003C\u002Ftd\u003E\n\u003C\u002Ftr\u003E\n\u003Ctr\u003E\n\u003Ctd align=\"left\"\u003Eaddress\u003C\u002Ftd\u003E\n\u003Ctd align=\"left\"\u003EYes when requested\u003C\u002Ftd\u003E\n\u003Ctd\u003EYes only when response type \u003Ccode\u003Eid_token\u003C\u002Fcode\u003E\u003C\u002Ftd\u003E\n\u003Ctd\u003ENo\u003C\u002Ftd\u003E\n\u003C\u002Ftr\u003E\n\u003Ctr\u003E\n\u003Ctd align=\"left\"\u003Eamr\u003C\u002Ftd\u003E\n\u003Ctd align=\"left\"\u003EYes\u003C\u002Ftd\u003E\n\u003Ctd\u003EYes\u003C\u002Ftd\u003E\n\u003Ctd\u003ENo\u003C\u002Ftd\u003E\n\u003C\u002Ftr\u003E\n\u003Ctr\u003E\n\u003Ctd align=\"left\"\u003Eaud\u003C\u002Ftd\u003E\n\u003Ctd align=\"left\"\u003ENo\u003C\u002Ftd\u003E\n\u003Ctd\u003EYes\u003C\u002Ftd\u003E\n\u003Ctd\u003EYes when JWT\u003C\u002Ftd\u003E\n\u003C\u002Ftr\u003E\n\u003Ctr\u003E\n\u003Ctd align=\"left\"\u003Eauth_time\u003C\u002Ftd\u003E\n\u003Ctd align=\"left\"\u003EYes\u003C\u002Ftd\u003E\n\u003Ctd\u003EYes\u003C\u002Ftd\u003E\n\u003Ctd\u003ENo\u003C\u002Ftd\u003E\n\u003C\u002Ftr\u003E\n\u003Ctr\u003E\n\u003Ctd align=\"left\"\u003Eazp\u003C\u002Ftd\u003E\n\u003Ctd align=\"left\"\u003ENo\u003C\u002Ftd\u003E\n\u003Ctd\u003EYes\u003C\u002Ftd\u003E\n\u003Ctd\u003EYes when JWT\u003C\u002Ftd\u003E\n\u003C\u002Ftr\u003E\n\u003Ctr\u003E\n\u003Ctd align=\"left\"\u003Eemail\u003C\u002Ftd\u003E\n\u003Ctd align=\"left\"\u003EYes when requested\u003C\u002Ftd\u003E\n\u003Ctd\u003EYes only when response type \u003Ccode\u003Eid_token\u003C\u002Fcode\u003E\u003C\u002Ftd\u003E\n\u003Ctd\u003ENo\u003C\u002Ftd\u003E\n\u003C\u002Ftr\u003E\n\u003Ctr\u003E\n\u003Ctd align=\"left\"\u003Eemail_verified\u003C\u002Ftd\u003E\n\u003Ctd align=\"left\"\u003EYes when requested\u003C\u002Ftd\u003E\n\u003Ctd\u003EYes only when response type \u003Ccode\u003Eid_token\u003C\u002Fcode\u003E\u003C\u002Ftd\u003E\n\u003Ctd\u003ENo\u003C\u002Ftd\u003E\n\u003C\u002Ftr\u003E\n\u003Ctr\u003E\n\u003Ctd align=\"left\"\u003Eexp\u003C\u002Ftd\u003E\n\u003Ctd align=\"left\"\u003ENo\u003C\u002Ftd\u003E\n\u003Ctd\u003EYes\u003C\u002Ftd\u003E\n\u003Ctd\u003EYes when JWT\u003C\u002Ftd\u003E\n\u003C\u002Ftr\u003E\n\u003Ctr\u003E\n\u003Ctd align=\"left\"\u003Efamily_name\u003C\u002Ftd\u003E\n\u003Ctd align=\"left\"\u003EYes when requested\u003C\u002Ftd\u003E\n\u003Ctd\u003EYes when requested\u003C\u002Ftd\u003E\n\u003Ctd\u003ENo\u003C\u002Ftd\u003E\n\u003C\u002Ftr\u003E\n\u003Ctr\u003E\n\u003Ctd align=\"left\"\u003Egender\u003C\u002Ftd\u003E\n\u003Ctd align=\"left\"\u003EYes when requested\u003C\u002Ftd\u003E\n\u003Ctd\u003EYes when requested\u003C\u002Ftd\u003E\n\u003Ctd\u003ENo\u003C\u002Ftd\u003E\n\u003C\u002Ftr\u003E\n\u003Ctr\u003E\n\u003Ctd align=\"left\"\u003Egiven_name\u003C\u002Ftd\u003E\n\u003Ctd align=\"left\"\u003EYes when requested\u003C\u002Ftd\u003E\n\u003Ctd\u003EYes when requested\u003C\u002Ftd\u003E\n\u003Ctd\u003ENo\u003C\u002Ftd\u003E\n\u003C\u002Ftr\u003E\n\u003Ctr\u003E\n\u003Ctd align=\"left\"\u003Eiat\u003C\u002Ftd\u003E\n\u003Ctd align=\"left\"\u003ENo\u003C\u002Ftd\u003E\n\u003Ctd\u003EYes\u003C\u002Ftd\u003E\n\u003Ctd\u003EYes when JWT\u003C\u002Ftd\u003E\n\u003C\u002Ftr\u003E\n\u003Ctr\u003E\n\u003Ctd align=\"left\"\u003Eiss\u003C\u002Ftd\u003E\n\u003Ctd align=\"left\"\u003ENo\u003C\u002Ftd\u003E\n\u003Ctd\u003EYes\u003C\u002Ftd\u003E\n\u003Ctd\u003EYes when JWT\u003C\u002Ftd\u003E\n\u003C\u002Ftr\u003E\n\u003Ctr\u003E\n\u003Ctd align=\"left\"\u003Elocale\u003C\u002Ftd\u003E\n\u003Ctd align=\"left\"\u003EYes when requested\u003C\u002Ftd\u003E\n\u003Ctd\u003EYes when requested\u003C\u002Ftd\u003E\n\u003Ctd\u003ENo\u003C\u002Ftd\u003E\n\u003C\u002Ftr\u003E\n\u003Ctr\u003E\n\u003Ctd align=\"left\"\u003Ename\u003C\u002Ftd\u003E\n\u003Ctd align=\"left\"\u003EYes when requested\u003C\u002Ftd\u003E\n\u003Ctd\u003EYes when requested\u003C\u002Ftd\u003E\n\u003Ctd\u003ENo\u003C\u002Ftd\u003E\n\u003C\u002Ftr\u003E\n\u003Ctr\u003E\n\u003Ctd align=\"left\"\u003Enonce\u003C\u002Ftd\u003E\n\u003Ctd align=\"left\"\u003ENo\u003C\u002Ftd\u003E\n\u003Ctd\u003EYes\u003C\u002Ftd\u003E\n\u003Ctd\u003ENo\u003C\u002Ftd\u003E\n\u003C\u002Ftr\u003E\n\u003Ctr\u003E\n\u003Ctd align=\"left\"\u003Ephone\u003C\u002Ftd\u003E\n\u003Ctd align=\"left\"\u003EYes when requested\u003C\u002Ftd\u003E\n\u003Ctd\u003EYes only when response type \u003Ccode\u003Eid_token\u003C\u002Fcode\u003E\u003C\u002Ftd\u003E\n\u003Ctd\u003ENo\u003C\u002Ftd\u003E\n\u003C\u002Ftr\u003E\n\u003Ctr\u003E\n\u003Ctd align=\"left\"\u003Epreferred_username\u003C\u002Ftd\u003E\n\u003Ctd align=\"left\"\u003EYes when requested\u003C\u002Ftd\u003E\n\u003Ctd\u003EYes\u003C\u002Ftd\u003E\n\u003Ctd\u003ENo\u003C\u002Ftd\u003E\n\u003C\u002Ftr\u003E\n\u003Ctr\u003E\n\u003Ctd align=\"left\"\u003Esub\u003C\u002Ftd\u003E\n\u003Ctd align=\"left\"\u003EYes\u003C\u002Ftd\u003E\n\u003Ctd\u003EYes\u003C\u002Ftd\u003E\n\u003Ctd\u003EYes when JWT\u003C\u002Ftd\u003E\n\u003C\u002Ftr\u003E\n\u003Ctr\u003E\n\u003Ctd align=\"left\"\u003Eurn:zitadel:iam:org:domain:primary:{domainname}\u003C\u002Ftd\u003E\n\u003Ctd align=\"left\"\u003EYes when requested\u003C\u002Ftd\u003E\n\u003Ctd\u003EYes when requested\u003C\u002Ftd\u003E\n\u003Ctd\u003EYes when JWT and requested\u003C\u002Ftd\u003E\n\u003C\u002Ftr\u003E\n\u003Ctr\u003E\n\u003Ctd align=\"left\"\u003Eurn:zitadel:iam:org:project:roles:{rolename}\u003C\u002Ftd\u003E\n\u003Ctd align=\"left\"\u003EYes when requested\u003C\u002Ftd\u003E\n\u003Ctd\u003EYes when requested or configured\u003C\u002Ftd\u003E\n\u003Ctd\u003EYes when JWT and requested or configured\u003C\u002Ftd\u003E\n\u003C\u002Ftr\u003E\n\u003C\u002Ftbody\u003E\u003C\u002Ftable\u003E\n\u003C\u002Fdiv\u003E\n\t\t\t\t\t\u003Ch4\u003E\n\t\t\t\t\t\t\u003Cspan id=\"Standard_Claims\" class=\"offset-anchor\" \u003E\u003C\u002Fspan\u003E\n\t\t\t\t\t\t\u003Ca href=\"documentation#Standard_Claims\" class=\"anchor\" aria-hidden=\"true\"\u003E \u003Ci class=\"las la-link\"\u003E\u003C\u002Fi\u003E \u003C\u002Fa\u003E\n\t\t\t\t\t\tStandard Claims\n\t\t\t\t\t\u003C\u002Fh4\u003E\u003Cdiv class=\"table-wrapper\"\u003E\n\u003Ctable\u003E\n\u003Cthead\u003E\n\u003Ctr\u003E\n\u003Cth align=\"left\"\u003EClaims\u003C\u002Fth\u003E\n\u003Cth align=\"left\"\u003EExample\u003C\u002Fth\u003E\n\u003Cth\u003EDescription\u003C\u002Fth\u003E\n\u003C\u002Ftr\u003E\n\u003C\u002Fthead\u003E\n\u003Ctbody\u003E\u003Ctr\u003E\n\u003Ctd align=\"left\"\u003Eacr\u003C\u002Ftd\u003E\n\u003Ctd align=\"left\"\u003ETBA\u003C\u002Ftd\u003E\n\u003Ctd\u003ETBA\u003C\u002Ftd\u003E\n\u003C\u002Ftr\u003E\n\u003Ctr\u003E\n\u003Ctd align=\"left\"\u003Eaddress\u003C\u002Ftd\u003E\n\u003Ctd align=\"left\"\u003E\u003Ccode\u003ETeufener Strasse 19, 9000 St. Gallen\u003C\u002Fcode\u003E\u003C\u002Ftd\u003E\n\u003Ctd\u003ETBA\u003C\u002Ftd\u003E\n\u003C\u002Ftr\u003E\n\u003Ctr\u003E\n\u003Ctd align=\"left\"\u003Eamr\u003C\u002Ftd\u003E\n\u003Ctd align=\"left\"\u003E\u003Ccode\u003Epwd mfa\u003C\u002Fcode\u003E\u003C\u002Ftd\u003E\n\u003Ctd\u003EAuthentication Method References as defined in \u003Ca href=\"https:\u002F\u002Ftools.ietf.org\u002Fhtml\u002Frfc8176\" target=\"_blank\"\u003ERFC8176\u003C\u002Fa\u003E\u003C\u002Ftd\u003E\n\u003C\u002Ftr\u003E\n\u003Ctr\u003E\n\u003Ctd align=\"left\"\u003Eaud\u003C\u002Ftd\u003E\n\u003Ctd align=\"left\"\u003E\u003Ccode\u003E69234237810729019\u003C\u002Fcode\u003E\u003C\u002Ftd\u003E\n\u003Ctd\u003EBy default all client id&#39;s and the project id is included\u003C\u002Ftd\u003E\n\u003C\u002Ftr\u003E\n\u003Ctr\u003E\n\u003Ctd align=\"left\"\u003Eauth_time\u003C\u002Ftd\u003E\n\u003Ctd align=\"left\"\u003E\u003Ccode\u003E1311280969\u003C\u002Fcode\u003E\u003C\u002Ftd\u003E\n\u003Ctd\u003EUnix time of the authentication\u003C\u002Ftd\u003E\n\u003C\u002Ftr\u003E\n\u003Ctr\u003E\n\u003Ctd align=\"left\"\u003Eazp\u003C\u002Ftd\u003E\n\u003Ctd align=\"left\"\u003E\u003Ccode\u003E69234237810729234\u003C\u002Fcode\u003E\u003C\u002Ftd\u003E\n\u003Ctd\u003EClient id of the client who requested the token\u003C\u002Ftd\u003E\n\u003C\u002Ftr\u003E\n\u003Ctr\u003E\n\u003Ctd align=\"left\"\u003Eemail\u003C\u002Ftd\u003E\n\u003Ctd align=\"left\"\u003E\u003Ccode\u003Eroad.runner@acme.ch\u003C\u002Fcode\u003E\u003C\u002Ftd\u003E\n\u003Ctd\u003EEmail Address of the subject\u003C\u002Ftd\u003E\n\u003C\u002Ftr\u003E\n\u003Ctr\u003E\n\u003Ctd align=\"left\"\u003Eemail_verified\u003C\u002Ftd\u003E\n\u003Ctd align=\"left\"\u003E\u003Ccode\u003Etrue\u003C\u002Fcode\u003E\u003C\u002Ftd\u003E\n\u003Ctd\u003EBoolean if the email was verified by ZITADEL\u003C\u002Ftd\u003E\n\u003C\u002Ftr\u003E\n\u003Ctr\u003E\n\u003Ctd align=\"left\"\u003Eexp\u003C\u002Ftd\u003E\n\u003Ctd align=\"left\"\u003E\u003Ccode\u003E1311281970\u003C\u002Fcode\u003E\u003C\u002Ftd\u003E\n\u003Ctd\u003ETime the token expires as unix time\u003C\u002Ftd\u003E\n\u003C\u002Ftr\u003E\n\u003Ctr\u003E\n\u003Ctd align=\"left\"\u003Efamily_name\u003C\u002Ftd\u003E\n\u003Ctd align=\"left\"\u003E\u003Ccode\u003ERunner\u003C\u002Fcode\u003E\u003C\u002Ftd\u003E\n\u003Ctd\u003EThe subjects family name\u003C\u002Ftd\u003E\n\u003C\u002Ftr\u003E\n\u003Ctr\u003E\n\u003Ctd align=\"left\"\u003Egender\u003C\u002Ftd\u003E\n\u003Ctd align=\"left\"\u003E\u003Ccode\u003Eother\u003C\u002Fcode\u003E\u003C\u002Ftd\u003E\n\u003Ctd\u003EGender of the subject\u003C\u002Ftd\u003E\n\u003C\u002Ftr\u003E\n\u003Ctr\u003E\n\u003Ctd align=\"left\"\u003Egiven_name\u003C\u002Ftd\u003E\n\u003Ctd align=\"left\"\u003E\u003Ccode\u003ERoad\u003C\u002Fcode\u003E\u003C\u002Ftd\u003E\n\u003Ctd\u003EGiven name of the subject\u003C\u002Ftd\u003E\n\u003C\u002Ftr\u003E\n\u003Ctr\u003E\n\u003Ctd align=\"left\"\u003Eiat\u003C\u002Ftd\u003E\n\u003Ctd align=\"left\"\u003E\u003Ccode\u003E1311280970\u003C\u002Fcode\u003E\u003C\u002Ftd\u003E\n\u003Ctd\u003EIssued at time of the token as unix time\u003C\u002Ftd\u003E\n\u003C\u002Ftr\u003E\n\u003Ctr\u003E\n\u003Ctd align=\"left\"\u003Eiss\u003C\u002Ftd\u003E\n\u003Ctd align=\"left\"\u003E\u003Ccode\u003Ehttps:\u002F\u002Fissuer.zitadel.ch\u003C\u002Fcode\u003E\u003C\u002Ftd\u003E\n\u003Ctd\u003EIssuing domain of a token\u003C\u002Ftd\u003E\n\u003C\u002Ftr\u003E\n\u003Ctr\u003E\n\u003Ctd align=\"left\"\u003Elocale\u003C\u002Ftd\u003E\n\u003Ctd align=\"left\"\u003E\u003Ccode\u003Een\u003C\u002Fcode\u003E\u003C\u002Ftd\u003E\n\u003Ctd\u003ELanguage from the subject\u003C\u002Ftd\u003E\n\u003C\u002Ftr\u003E\n\u003Ctr\u003E\n\u003Ctd align=\"left\"\u003Ename\u003C\u002Ftd\u003E\n\u003Ctd align=\"left\"\u003E\u003Ccode\u003ERoad Runner\u003C\u002Fcode\u003E\u003C\u002Ftd\u003E\n\u003Ctd\u003EThe subjects full name\u003C\u002Ftd\u003E\n\u003C\u002Ftr\u003E\n\u003Ctr\u003E\n\u003Ctd align=\"left\"\u003Enonce\u003C\u002Ftd\u003E\n\u003Ctd align=\"left\"\u003E\u003Ccode\u003EblQtVEJHNTF0WHhFQmhqZ0RqeHJsdzdkd2d...\u003C\u002Fcode\u003E\u003C\u002Ftd\u003E\n\u003Ctd\u003EThe nonce provided by the client\u003C\u002Ftd\u003E\n\u003C\u002Ftr\u003E\n\u003Ctr\u003E\n\u003Ctd align=\"left\"\u003Ephone\u003C\u002Ftd\u003E\n\u003Ctd align=\"left\"\u003E\u003Ccode\u003E+41 79 XXX XX XX\u003C\u002Fcode\u003E\u003C\u002Ftd\u003E\n\u003Ctd\u003EPhone number provided by the user\u003C\u002Ftd\u003E\n\u003C\u002Ftr\u003E\n\u003Ctr\u003E\n\u003Ctd align=\"left\"\u003Epreferred_username\u003C\u002Ftd\u003E\n\u003Ctd align=\"left\"\u003E\u003Ccode\u003Eroad.runner@acme.caos.ch\u003C\u002Fcode\u003E\u003C\u002Ftd\u003E\n\u003Ctd\u003EZITADEL&#39;s login name of the user. Consist of \u003Ccode\u003Eusername@primarydomain\u003C\u002Fcode\u003E\u003C\u002Ftd\u003E\n\u003C\u002Ftr\u003E\n\u003Ctr\u003E\n\u003Ctd align=\"left\"\u003Esub\u003C\u002Ftd\u003E\n\u003Ctd align=\"left\"\u003E\u003Ccode\u003E77776025198584418\u003C\u002Fcode\u003E\u003C\u002Ftd\u003E\n\u003Ctd\u003ESubject ID of the user\u003C\u002Ftd\u003E\n\u003C\u002Ftr\u003E\n\u003C\u002Ftbody\u003E\u003C\u002Ftable\u003E\n\u003C\u002Fdiv\u003E\n\t\t\t\t\t\u003Ch4\u003E\n\t\t\t\t\t\t\u003Cspan id=\"Custom_Claims\" class=\"offset-anchor\" \u003E\u003C\u002Fspan\u003E\n\t\t\t\t\t\t\u003Ca href=\"documentation#Custom_Claims\" class=\"anchor\" aria-hidden=\"true\"\u003E \u003Ci class=\"las la-link\"\u003E\u003C\u002Fi\u003E \u003C\u002Fa\u003E\n\t\t\t\t\t\tCustom Claims\n\t\t\t\t\t\u003C\u002Fh4\u003E\u003Cblockquote\u003E\n\u003Cp\u003EThis feature is not yet released\u003C\u002Fp\u003E\n\u003C\u002Fblockquote\u003E\n\n\t\t\t\t\t\u003Ch4\u003E\n\t\t\t\t\t\t\u003Cspan id=\"Reserved_Claims\" class=\"offset-anchor\" \u003E\u003C\u002Fspan\u003E\n\t\t\t\t\t\t\u003Ca href=\"documentation#Reserved_Claims\" class=\"anchor\" aria-hidden=\"true\"\u003E \u003Ci class=\"las la-link\"\u003E\u003C\u002Fi\u003E \u003C\u002Fa\u003E\n\t\t\t\t\t\tReserved Claims\n\t\t\t\t\t\u003C\u002Fh4\u003E\u003Cp\u003EZITADEL reserves some claims to assert certain data.\u003C\u002Fp\u003E\n\u003Cdiv class=\"table-wrapper\"\u003E\n\u003Ctable\u003E\n\u003Cthead\u003E\n\u003Ctr\u003E\n\u003Cth align=\"left\"\u003EClaims\u003C\u002Fth\u003E\n\u003Cth align=\"left\"\u003EExample\u003C\u002Fth\u003E\n\u003Cth\u003EDescription\u003C\u002Fth\u003E\n\u003C\u002Ftr\u003E\n\u003C\u002Fthead\u003E\n\u003Ctbody\u003E\u003Ctr\u003E\n\u003Ctd align=\"left\"\u003Eurn:zitadel:iam:org:domain:primary:{domainname}\u003C\u002Ftd\u003E\n\u003Ctd align=\"left\"\u003E\u003Ccode\u003E{&quot;urn:zitadel:iam:org:domain:primary&quot;: &quot;acme.ch&quot;}\u003C\u002Fcode\u003E\u003C\u002Ftd\u003E\n\u003Ctd\u003EThis claim represents the primary domain of the organization the user belongs to.\u003C\u002Ftd\u003E\n\u003C\u002Ftr\u003E\n\u003Ctr\u003E\n\u003Ctd align=\"left\"\u003Eurn:zitadel:iam:org:project:roles:{rolename}\u003C\u002Ftd\u003E\n\u003Ctd align=\"left\"\u003E\u003Ccode\u003E{&quot;urn:zitadel:iam:org:project:roles&quot;: [ {&quot;user&quot;: {&quot;id1&quot;: &quot;acme.zitade.ch&quot;, &quot;id2&quot;: &quot;caos.ch&quot;} } ] }\u003C\u002Fcode\u003E\u003C\u002Ftd\u003E\n\u003Ctd\u003EWhen roles are asserted, ZITADEL does this by providing the \u003Ccode\u003Eid\u003C\u002Fcode\u003E and \u003Ccode\u003EprimaryDomain\u003C\u002Fcode\u003E below the role. This gives you the option to check in which organization a user has the role.\u003C\u002Ftd\u003E\n\u003C\u002Ftr\u003E\n\u003Ctr\u003E\n\u003Ctd align=\"left\"\u003Eurn:zitadel:iam:roles:{rolename}\u003C\u002Ftd\u003E\n\u003Ctd align=\"left\"\u003ETBA\u003C\u002Ftd\u003E\n\u003Ctd\u003ETBA\u003C\u002Ftd\u003E\n\u003C\u002Ftr\u003E\n\u003C\u002Ftbody\u003E\u003C\u002Ftable\u003E\n\u003C\u002Fdiv\u003E\n\t\t\t\t\t\u003Ch3\u003E\n\t\t\t\t\t\t\u003Cspan id=\"Grant_Types\" class=\"offset-anchor\" \u003E\u003C\u002Fspan\u003E\n\t\t\t\t\t\t\u003Ca href=\"documentation#Grant_Types\" class=\"anchor\" aria-hidden=\"true\"\u003E \u003Ci class=\"las la-link\"\u003E\u003C\u002Fi\u003E \u003C\u002Fa\u003E\n\t\t\t\t\t\tGrant Types\n\t\t\t\t\t\u003C\u002Fh3\u003E\u003Cp\u003EFor a list of supported or unsupported \u003Ccode\u003EGrant Types\u003C\u002Fcode\u003E please have a look at the table below.\u003C\u002Fp\u003E\n\u003Cdiv class=\"table-wrapper\"\u003E\n\u003Ctable\u003E\n\u003Cthead\u003E\n\u003Ctr\u003E\n\u003Cth align=\"left\"\u003EGrant Type\u003C\u002Fth\u003E\n\u003Cth align=\"left\"\u003ESupported\u003C\u002Fth\u003E\n\u003C\u002Ftr\u003E\n\u003C\u002Fthead\u003E\n\u003Ctbody\u003E\u003Ctr\u003E\n\u003Ctd align=\"left\"\u003EAuthorization Code\u003C\u002Ftd\u003E\n\u003Ctd align=\"left\"\u003Eyes\u003C\u002Ftd\u003E\n\u003C\u002Ftr\u003E\n\u003Ctr\u003E\n\u003Ctd align=\"left\"\u003EAuthorization Code with PKCE\u003C\u002Ftd\u003E\n\u003Ctd align=\"left\"\u003Eyes\u003C\u002Ftd\u003E\n\u003C\u002Ftr\u003E\n\u003Ctr\u003E\n\u003Ctd align=\"left\"\u003EClient Credentials\u003C\u002Ftd\u003E\n\u003Ctd align=\"left\"\u003Eyes\u003C\u002Ftd\u003E\n\u003C\u002Ftr\u003E\n\u003Ctr\u003E\n\u003Ctd align=\"left\"\u003EDevice Authorization\u003C\u002Ftd\u003E\n\u003Ctd align=\"left\"\u003Eunder consideration\u003C\u002Ftd\u003E\n\u003C\u002Ftr\u003E\n\u003Ctr\u003E\n\u003Ctd align=\"left\"\u003EImplicit\u003C\u002Ftd\u003E\n\u003Ctd align=\"left\"\u003Eyes\u003C\u002Ftd\u003E\n\u003C\u002Ftr\u003E\n\u003Ctr\u003E\n\u003Ctd align=\"left\"\u003EJSON Web Token (JWT) Profile\u003C\u002Ftd\u003E\n\u003Ctd align=\"left\"\u003Epartially\u003C\u002Ftd\u003E\n\u003C\u002Ftr\u003E\n\u003Ctr\u003E\n\u003Ctd align=\"left\"\u003ERefresh Token\u003C\u002Ftd\u003E\n\u003Ctd align=\"left\"\u003Ework in progress\u003C\u002Ftd\u003E\n\u003C\u002Ftr\u003E\n\u003Ctr\u003E\n\u003Ctd align=\"left\"\u003EResource Owner Password Credentials\u003C\u002Ftd\u003E\n\u003Ctd align=\"left\"\u003Eno\u003C\u002Ftd\u003E\n\u003C\u002Ftr\u003E\n\u003Ctr\u003E\n\u003Ctd align=\"left\"\u003ESecurity Assertion Markup Language (SAML) 2.0 Profile\u003C\u002Ftd\u003E\n\u003Ctd align=\"left\"\u003Eno\u003C\u002Ftd\u003E\n\u003C\u002Ftr\u003E\n\u003Ctr\u003E\n\u003Ctd align=\"left\"\u003EToken Exchange\u003C\u002Ftd\u003E\n\u003Ctd align=\"left\"\u003Ework in progress\u003C\u002Ftd\u003E\n\u003C\u002Ftr\u003E\n\u003C\u002Ftbody\u003E\u003C\u002Ftable\u003E\n\u003C\u002Fdiv\u003E\n\t\t\t\t\t\u003Ch4\u003E\n\t\t\t\t\t\t\u003Cspan id=\"Authorization_Code\" class=\"offset-anchor\" \u003E\u003C\u002Fspan\u003E\n\t\t\t\t\t\t\u003Ca href=\"documentation#Authorization_Code\" class=\"anchor\" aria-hidden=\"true\"\u003E \u003Ci class=\"las la-link\"\u003E\u003C\u002Fi\u003E \u003C\u002Fa\u003E\n\t\t\t\t\t\tAuthorization Code\n\t\t\t\t\t\u003C\u002Fh4\u003E\u003Cp\u003E\u003Cstrong\u003ELink to spec.\u003C\u002Fstrong\u003E \u003Ca href=\"https:\u002F\u002Ftools.ietf.org\u002Fhtml\u002Frfc6749#section-1.3.1\" target=\"_blank\"\u003EThe OAuth 2.0 Authorization Framework Section 1.3.1\u003C\u002Fa\u003E\u003C\u002Fp\u003E\n\n\t\t\t\t\t\u003Ch4\u003E\n\t\t\t\t\t\t\u003Cspan id=\"Proof_Key_for_Code_Exchange\" class=\"offset-anchor\" \u003E\u003C\u002Fspan\u003E\n\t\t\t\t\t\t\u003Ca href=\"documentation#Proof_Key_for_Code_Exchange\" class=\"anchor\" aria-hidden=\"true\"\u003E \u003Ci class=\"las la-link\"\u003E\u003C\u002Fi\u003E \u003C\u002Fa\u003E\n\t\t\t\t\t\tProof Key for Code Exchange\n\t\t\t\t\t\u003C\u002Fh4\u003E\u003Cp\u003E\u003Cstrong\u003ELink to spec.\u003C\u002Fstrong\u003E \u003Ca href=\"https:\u002F\u002Ftools.ietf.org\u002Fhtml\u002Frfc7636\" target=\"_blank\"\u003EProof Key for Code Exchange by OAuth Public Clients\u003C\u002Fa\u003E\u003C\u002Fp\u003E\n\n\t\t\t\t\t\u003Ch4\u003E\n\t\t\t\t\t\t\u003Cspan id=\"Implicit\" class=\"offset-anchor\" \u003E\u003C\u002Fspan\u003E\n\t\t\t\t\t\t\u003Ca href=\"documentation#Implicit\" class=\"anchor\" aria-hidden=\"true\"\u003E \u003Ci class=\"las la-link\"\u003E\u003C\u002Fi\u003E \u003C\u002Fa\u003E\n\t\t\t\t\t\tImplicit\n\t\t\t\t\t\u003C\u002Fh4\u003E\u003Cp\u003E\u003Cstrong\u003ELink to spec.\u003C\u002Fstrong\u003E \u003Ca href=\"https:\u002F\u002Ftools.ietf.org\u002Fhtml\u002Frfc6749#section-1.3.2\" target=\"_blank\"\u003EThe OAuth 2.0 Authorization Framework Section 1.3.2\u003C\u002Fa\u003E\u003C\u002Fp\u003E\n\n\t\t\t\t\t\u003Ch4\u003E\n\t\t\t\t\t\t\u003Cspan id=\"Client_Credentials\" class=\"offset-anchor\" \u003E\u003C\u002Fspan\u003E\n\t\t\t\t\t\t\u003Ca href=\"documentation#Client_Credentials\" class=\"anchor\" aria-hidden=\"true\"\u003E \u003Ci class=\"las la-link\"\u003E\u003C\u002Fi\u003E \u003C\u002Fa\u003E\n\t\t\t\t\t\tClient Credentials\n\t\t\t\t\t\u003C\u002Fh4\u003E\u003Cp\u003E\u003Cstrong\u003ELink to spec.\u003C\u002Fstrong\u003E \u003Ca href=\"https:\u002F\u002Ftools.ietf.org\u002Fhtml\u002Frfc6749#section-1.3.4\" target=\"_blank\"\u003EThe OAuth 2.0 Authorization Framework Section 1.3.4\u003C\u002Fa\u003E\u003C\u002Fp\u003E\n\n\t\t\t\t\t\u003Ch4\u003E\n\t\t\t\t\t\t\u003Cspan id=\"Refresh_Token\" class=\"offset-anchor\" \u003E\u003C\u002Fspan\u003E\n\t\t\t\t\t\t\u003Ca href=\"documentation#Refresh_Token\" class=\"anchor\" aria-hidden=\"true\"\u003E \u003Ci class=\"las la-link\"\u003E\u003C\u002Fi\u003E \u003C\u002Fa\u003E\n\t\t\t\t\t\tRefresh Token\n\t\t\t\t\t\u003C\u002Fh4\u003E\u003Cp\u003E\u003Cstrong\u003ELink to spec.\u003C\u002Fstrong\u003E \u003Ca href=\"https:\u002F\u002Ftools.ietf.org\u002Fhtml\u002Frfc6749#section-1.5\" target=\"_blank\"\u003EThe OAuth 2.0 Authorization Framework Section 1.5\u003C\u002Fa\u003E\u003C\u002Fp\u003E\n\n\t\t\t\t\t\u003Ch4\u003E\n\t\t\t\t\t\t\u003Cspan id=\"JSON_Web_Token_JWT_Profile\" class=\"offset-anchor\" \u003E\u003C\u002Fspan\u003E\n\t\t\t\t\t\t\u003Ca href=\"documentation#JSON_Web_Token_JWT_Profile\" class=\"anchor\" aria-hidden=\"true\"\u003E \u003Ci class=\"las la-link\"\u003E\u003C\u002Fi\u003E \u003C\u002Fa\u003E\n\t\t\t\t\t\tJSON Web Token (JWT) Profile\n\t\t\t\t\t\u003C\u002Fh4\u003E\u003Cp\u003E\u003Cstrong\u003ELink to spec.\u003C\u002Fstrong\u003E \u003Ca href=\"https:\u002F\u002Ftools.ietf.org\u002Fhtml\u002Frfc7523\" target=\"_blank\"\u003EJSON Web Token (JWT) Profile for OAuth 2.0 Client Authentication and Authorization Grants\u003C\u002Fa\u003E\u003C\u002Fp\u003E\n\n\t\t\t\t\t\u003Ch5\u003E\n\t\t\t\t\t\t\u003Cspan id=\"false\" class=\"offset-anchor\" data-scrollignore\u003E\u003C\u002Fspan\u003E\n\t\t\t\t\t\t\u003Ca href=\"documentation#false\" class=\"anchor\" aria-hidden=\"true\"\u003E \u003Ci class=\"las la-link\"\u003E\u003C\u002Fi\u003E \u003C\u002Fa\u003E\n\t\t\t\t\t\tUsing JWTs as Authorization Grants\n\t\t\t\t\t\u003C\u002Fh5\u003E\u003Cp\u003EOur service user work with the JWT profile to authenticate them against ZITADEL.\u003C\u002Fp\u003E\n\u003Col\u003E\n\u003Cli\u003ECreate or use an existing service user\u003C\u002Fli\u003E\n\u003Cli\u003ECreate a new key and download it\u003C\u002Fli\u003E\n\u003Cli\u003EGenerate a JWT with the structure below and sing it with the downloaded key\u003C\u002Fli\u003E\n\u003Cli\u003ESend the JWT Base64 encoded to ZITADEL&#39;s token endpoint\u003C\u002Fli\u003E\n\u003Cli\u003EUse the received access token\u003C\u002Fli\u003E\n\u003C\u002Fol\u003E\n\u003Cdiv class=\"side-by-side\"\u003E\u003Cdiv class=\"copy\"\u003E\u003Cp\u003EKey JSON\u003C\u002Fp\u003E\n\u003Cdiv class=\"table-wrapper\"\u003E\n\u003Ctable\u003E\n\u003Cthead\u003E\n\u003Ctr\u003E\n\u003Cth align=\"left\"\u003EKey\u003C\u002Fth\u003E\n\u003Cth align=\"left\"\u003EExample\u003C\u002Fth\u003E\n\u003Cth align=\"left\"\u003EDescription\u003C\u002Fth\u003E\n\u003C\u002Ftr\u003E\n\u003C\u002Fthead\u003E\n\u003Ctbody\u003E\u003Ctr\u003E\n\u003Ctd align=\"left\"\u003Etype\u003C\u002Ftd\u003E\n\u003Ctd align=\"left\"\u003E\u003Ccode\u003E&quot;serviceaccount&quot;\u003C\u002Fcode\u003E\u003C\u002Ftd\u003E\n\u003Ctd align=\"left\"\u003EThe type of account, right now only serviceaccount is valid\u003C\u002Ftd\u003E\n\u003C\u002Ftr\u003E\n\u003Ctr\u003E\n\u003Ctd align=\"left\"\u003EkeyId\u003C\u002Ftd\u003E\n\u003Ctd align=\"left\"\u003E\u003Ccode\u003E&quot;81693565968772648&quot;\u003C\u002Fcode\u003E\u003C\u002Ftd\u003E\n\u003Ctd align=\"left\"\u003EThis is unique ID of the key\u003C\u002Ftd\u003E\n\u003C\u002Ftr\u003E\n\u003Ctr\u003E\n\u003Ctd align=\"left\"\u003Ekey\u003C\u002Ftd\u003E\n\u003Ctd align=\"left\"\u003E\u003Ccode\u003E&quot;-----BEGIN RSA PRIVATE KEY-----...-----END RSA PRIVATE KEY-----&quot;\u003C\u002Fcode\u003E\u003C\u002Ftd\u003E\n\u003Ctd align=\"left\"\u003EThe private key generated by ZITADEL, this can not be regenerated!\u003C\u002Ftd\u003E\n\u003C\u002Ftr\u003E\n\u003Ctr\u003E\n\u003Ctd align=\"left\"\u003EuserId\u003C\u002Ftd\u003E\n\u003Ctd align=\"left\"\u003E\u003Ccode\u003E78366401571647008\u003C\u002Fcode\u003E\u003C\u002Ftd\u003E\n\u003Ctd align=\"left\"\u003EThe service users ID, this is the same as the subject from tokens\u003C\u002Ftd\u003E\n\u003C\u002Ftr\u003E\n\u003C\u002Ftbody\u003E\u003C\u002Ftable\u003E\n\u003C\u002Fdiv\u003E\u003C\u002Fdiv\u003E\u003Cdiv class=\"code\"\u003E\u003Cdiv class=''\u003E\u003Cpre class='language-undefined'\u003E\u003Ccode\u003E{\n\t\u003Cspan class=\"hljs-attr\"\u003E&quot;type&quot;\u003C\u002Fspan\u003E: \u003Cspan class=\"hljs-string\"\u003E&quot;serviceaccount&quot;\u003C\u002Fspan\u003E,\n\t\u003Cspan class=\"hljs-attr\"\u003E&quot;keyId&quot;\u003C\u002Fspan\u003E: \u003Cspan class=\"hljs-string\"\u003E&quot;81693565968772648&quot;\u003C\u002Fspan\u003E,\n\t\u003Cspan class=\"hljs-attr\"\u003E&quot;key&quot;\u003C\u002Fspan\u003E: \u003Cspan class=\"hljs-string\"\u003E&quot;-----BEGIN RSA PRIVATE KEY-----...-----END RSA PRIVATE KEY-----&quot;\u003C\u002Fspan\u003E,\n\t\u003Cspan class=\"hljs-attr\"\u003E&quot;userId&quot;\u003C\u002Fspan\u003E: \u003Cspan class=\"hljs-string\"\u003E&quot;78366401571647008&quot;\u003C\u002Fspan\u003E\n}\u003C\u002Fcode\u003E\u003C\u002Fpre\u003E\u003C\u002Fdiv\u003E\u003C\u002Fdiv\u003E\u003C\u002Fdiv\u003E\u003Cdiv class=\"side-by-side\"\u003E\u003Cdiv class=\"copy\"\u003E\u003Cp\u003EJWT\u003C\u002Fp\u003E\n\u003Cdiv class=\"table-wrapper\"\u003E\n\u003Ctable\u003E\n\u003Cthead\u003E\n\u003Ctr\u003E\n\u003Cth align=\"left\"\u003EClaim\u003C\u002Fth\u003E\n\u003Cth align=\"left\"\u003EExample\u003C\u002Fth\u003E\n\u003Cth align=\"left\"\u003EDescription\u003C\u002Fth\u003E\n\u003C\u002Ftr\u003E\n\u003C\u002Fthead\u003E\n\u003Ctbody\u003E\u003Ctr\u003E\n\u003Ctd align=\"left\"\u003Eaud\u003C\u002Ftd\u003E\n\u003Ctd align=\"left\"\u003E\u003Ccode\u003E&quot;https:\u002F\u002Fissuer.zitadel.ch&quot;\u003C\u002Fcode\u003E\u003C\u002Ftd\u003E\n\u003Ctd align=\"left\"\u003EString or Array of intended audiences MUST include ZITADEL&#39;s issuing domain\u003C\u002Ftd\u003E\n\u003C\u002Ftr\u003E\n\u003Ctr\u003E\n\u003Ctd align=\"left\"\u003Eexp\u003C\u002Ftd\u003E\n\u003Ctd align=\"left\"\u003E\u003Ccode\u003E1605183582\u003C\u002Fcode\u003E\u003C\u002Ftd\u003E\n\u003Ctd align=\"left\"\u003EUnix timestamp of the expiry, MUST NOT be longer than 1h\u003C\u002Ftd\u003E\n\u003C\u002Ftr\u003E\n\u003Ctr\u003E\n\u003Ctd align=\"left\"\u003Eiat\u003C\u002Ftd\u003E\n\u003Ctd align=\"left\"\u003E\u003Ccode\u003E1605179982\u003C\u002Fcode\u003E\u003C\u002Ftd\u003E\n\u003Ctd align=\"left\"\u003EUnix timestamp of the creation singing time of the JWT\u003C\u002Ftd\u003E\n\u003C\u002Ftr\u003E\n\u003Ctr\u003E\n\u003Ctd align=\"left\"\u003Eiss\u003C\u002Ftd\u003E\n\u003Ctd align=\"left\"\u003E\u003Ccode\u003E&quot;http:\u002F\u002Flocalhost:50003&quot;\u003C\u002Fcode\u003E\u003C\u002Ftd\u003E\n\u003Ctd align=\"left\"\u003EString which represents the requesting party\u003C\u002Ftd\u003E\n\u003C\u002Ftr\u003E\n\u003Ctr\u003E\n\u003Ctd align=\"left\"\u003Esub\u003C\u002Ftd\u003E\n\u003Ctd align=\"left\"\u003E\u003Ccode\u003E&quot;77479219772321307&quot;\u003C\u002Fcode\u003E\u003C\u002Ftd\u003E\n\u003Ctd align=\"left\"\u003EThe subject ID of the service user, normally the \u003Ccode\u003EuserId\u003C\u002Fcode\u003E from the json key file\u003C\u002Ftd\u003E\n\u003C\u002Ftr\u003E\n\u003C\u002Ftbody\u003E\u003C\u002Ftable\u003E\n\u003C\u002Fdiv\u003E\u003C\u002Fdiv\u003E\u003Cdiv class=\"code\"\u003E\u003Cdiv class=''\u003E\u003Cpre class='language-undefined'\u003E\u003Ccode\u003E{\n\t\u003Cspan class=\"hljs-attr\"\u003E&quot;iss&quot;\u003C\u002Fspan\u003E: \u003Cspan class=\"hljs-string\"\u003E&quot;http:\u002F\u002Flocalhost:50003&quot;\u003C\u002Fspan\u003E,\n\t\u003Cspan class=\"hljs-attr\"\u003E&quot;sub&quot;\u003C\u002Fspan\u003E: \u003Cspan class=\"hljs-string\"\u003E&quot;77479219772321307&quot;\u003C\u002Fspan\u003E,\n\t\u003Cspan class=\"hljs-attr\"\u003E&quot;aud&quot;\u003C\u002Fspan\u003E: \u003Cspan class=\"hljs-string\"\u003E&quot;https:\u002F\u002Fissuer.zitadel.ch&quot;\u003C\u002Fspan\u003E,\n\t\u003Cspan class=\"hljs-attr\"\u003E&quot;exp&quot;\u003C\u002Fspan\u003E: \u003Cspan class=\"hljs-number\"\u003E1605183582\u003C\u002Fspan\u003E,\n\t\u003Cspan class=\"hljs-attr\"\u003E&quot;iat&quot;\u003C\u002Fspan\u003E: \u003Cspan class=\"hljs-number\"\u003E1605179982\u003C\u002Fspan\u003E\n}\u003C\u002Fcode\u003E\u003C\u002Fpre\u003E\u003C\u002Fdiv\u003E\u003C\u002Fdiv\u003E\u003C\u002Fdiv\u003E\u003Cdiv class=\"side-by-side\"\u003E\u003Cdiv class=\"copy\"\u003E\u003Cp\u003EAccess Token Request\u003C\u002Fp\u003E\n\u003Cdiv class=\"table-wrapper\"\u003E\n\u003Ctable\u003E\n\u003Cthead\u003E\n\u003Ctr\u003E\n\u003Cth align=\"left\"\u003EParameter\u003C\u002Fth\u003E\n\u003Cth align=\"left\"\u003EExample\u003C\u002Fth\u003E\n\u003Cth align=\"left\"\u003EDescription\u003C\u002Fth\u003E\n\u003C\u002Ftr\u003E\n\u003C\u002Fthead\u003E\n\u003Ctbody\u003E\u003Ctr\u003E\n\u003Ctd align=\"left\"\u003EContent-Type\u003C\u002Ftd\u003E\n\u003Ctd align=\"left\"\u003E\u003Ccode\u003Eapplication\u002Fx-www-form-urlencoded\u003C\u002Fcode\u003E\u003C\u002Ftd\u003E\n\u003Ctd align=\"left\"\u003E\u003C\u002Ftd\u003E\n\u003C\u002Ftr\u003E\n\u003Ctr\u003E\n\u003Ctd align=\"left\"\u003Egrant_type\u003C\u002Ftd\u003E\n\u003Ctd align=\"left\"\u003E\u003Ccode\u003Eurn:ietf:params:oauth:grant-type:jwt-bearer\u003C\u002Fcode\u003E\u003C\u002Ftd\u003E\n\u003Ctd align=\"left\"\u003EUsing JWTs as Authorization Grants\u003C\u002Ftd\u003E\n\u003C\u002Ftr\u003E\n\u003Ctr\u003E\n\u003Ctd align=\"left\"\u003Eassertion\u003C\u002Ftd\u003E\n\u003Ctd align=\"left\"\u003E\u003Ccode\u003EeyJhbGciOiJSUzI1Ni...\u003C\u002Fcode\u003E\u003C\u002Ftd\u003E\n\u003Ctd align=\"left\"\u003EThe base64 encoded JWT created above\u003C\u002Ftd\u003E\n\u003C\u002Ftr\u003E\n\u003Ctr\u003E\n\u003Ctd align=\"left\"\u003Escope\u003C\u002Ftd\u003E\n\u003Ctd align=\"left\"\u003E\u003Ccode\u003Eopenid profile email urn:zitadel:iam:org:project:id:69234237810729019:aud\u003C\u002Fcode\u003E\u003C\u002Ftd\u003E\n\u003Ctd align=\"left\"\u003EScopes you would like to request from ZITADEL\u003C\u002Ftd\u003E\n\u003C\u002Ftr\u003E\n\u003C\u002Ftbody\u003E\u003C\u002Ftable\u003E\n\u003C\u002Fdiv\u003E\u003C\u002Fdiv\u003E\u003Cdiv class=\"code\"\u003E\u003Cdiv class=''\u003E\u003Cpre class='language-undefined'\u003E\u003Ccode\u003Ecurl --request POST \\\n  --url https:\u002F\u002Fapi.zitadel.ch\u002Foauth\u002Fv2\u002Ftoken \\\n  --header \u003Cspan class=\"hljs-string\"\u003E&#x27;Content-Type: application\u002Fx-www-form-urlencoded&#x27;\u003C\u002Fspan\u003E \\\n  --data grant_type=urn:ietf:params:oauth:grant-type:jwt-bearer \\\n  --data assertion=eyJhbGciOiJSUzI1Ni...\n  --data scope=openid profile email address\u003C\u002Fcode\u003E\u003C\u002Fpre\u003E\u003C\u002Fdiv\u003E\u003C\u002Fdiv\u003E\u003C\u002Fdiv\u003E\n\t\t\t\t\t\u003Ch5\u003E\n\t\t\t\t\t\t\u003Cspan id=\"false\" class=\"offset-anchor\" data-scrollignore\u003E\u003C\u002Fspan\u003E\n\t\t\t\t\t\t\u003Ca href=\"documentation#false\" class=\"anchor\" aria-hidden=\"true\"\u003E \u003Ci class=\"las la-link\"\u003E\u003C\u002Fi\u003E \u003C\u002Fa\u003E\n\t\t\t\t\t\tUsing JWTs for Client Authentication\n\t\t\t\t\t\u003C\u002Fh5\u003E\u003Cblockquote\u003E\n\u003Cp\u003ENot yet supported\u003C\u002Fp\u003E\n\u003C\u002Fblockquote\u003E\n\n\t\t\t\t\t\u003Ch4\u003E\n\t\t\t\t\t\t\u003Cspan id=\"Token_Exchange\" class=\"offset-anchor\" \u003E\u003C\u002Fspan\u003E\n\t\t\t\t\t\t\u003Ca href=\"documentation#Token_Exchange\" class=\"anchor\" aria-hidden=\"true\"\u003E \u003Ci class=\"las la-link\"\u003E\u003C\u002Fi\u003E \u003C\u002Fa\u003E\n\t\t\t\t\t\tToken Exchange\n\t\t\t\t\t\u003C\u002Fh4\u003E\u003Cp\u003E\u003Cstrong\u003ELink to spec.\u003C\u002Fstrong\u003E \u003Ca href=\"https:\u002F\u002Ftools.ietf.org\u002Fhtml\u002Frfc8693\" target=\"_blank\"\u003EOAuth 2.0 Token Exchange\u003C\u002Fa\u003E\u003C\u002Fp\u003E\n\n\t\t\t\t\t\u003Ch3\u003E\n\t\t\t\t\t\t\u003Cspan id=\"Device_Authorization\" class=\"offset-anchor\" \u003E\u003C\u002Fspan\u003E\n\t\t\t\t\t\t\u003Ca href=\"documentation#Device_Authorization\" class=\"anchor\" aria-hidden=\"true\"\u003E \u003Ci class=\"las la-link\"\u003E\u003C\u002Fi\u003E \u003C\u002Fa\u003E\n\t\t\t\t\t\tDevice Authorization\n\t\t\t\t\t\u003C\u002Fh3\u003E\u003Cp\u003E\u003Cstrong\u003ELink to spec.\u003C\u002Fstrong\u003E \u003Ca href=\"https:\u002F\u002Ftools.ietf.org\u002Fhtml\u002Frfc8628\" target=\"_blank\"\u003EOAuth 2.0 Device Authorization Grant\u003C\u002Fa\u003E\u003C\u002Fp\u003E\n\n\t\t\t\t\t\u003Ch3\u003E\n\t\t\t\t\t\t\u003Cspan id=\"Not_Supported_Grant_Types\" class=\"offset-anchor\" \u003E\u003C\u002Fspan\u003E\n\t\t\t\t\t\t\u003Ca href=\"documentation#Not_Supported_Grant_Types\" class=\"anchor\" aria-hidden=\"true\"\u003E \u003Ci class=\"las la-link\"\u003E\u003C\u002Fi\u003E \u003C\u002Fa\u003E\n\t\t\t\t\t\tNot Supported Grant Types\n\t\t\t\t\t\u003C\u002Fh3\u003E\n\t\t\t\t\t\u003Ch4\u003E\n\t\t\t\t\t\t\u003Cspan id=\"Resource_Owner_Password_Credentials\" class=\"offset-anchor\" \u003E\u003C\u002Fspan\u003E\n\t\t\t\t\t\t\u003Ca href=\"documentation#Resource_Owner_Password_Credentials\" class=\"anchor\" aria-hidden=\"true\"\u003E \u003Ci class=\"las la-link\"\u003E\u003C\u002Fi\u003E \u003C\u002Fa\u003E\n\t\t\t\t\t\tResource Owner Password Credentials\n\t\t\t\t\t\u003C\u002Fh4\u003E\u003Cblockquote\u003E\n\u003Cp\u003EDue to growing security concerns we do not support this grant type. With OAuth 2.1 it looks like this grant will be removed.\u003C\u002Fp\u003E\n\u003C\u002Fblockquote\u003E\n\u003Cp\u003E\u003Cstrong\u003ELink to spec.\u003C\u002Fstrong\u003E \u003Ca href=\"https:\u002F\u002Ftools.ietf.org\u002Fhtml\u002Frfc6749#section-1.3.3\" target=\"_blank\"\u003EOThe OAuth 2.0 Authorization Framework Section 1.3.3\u003C\u002Fa\u003E\u003C\u002Fp\u003E\n\n\t\t\t\t\t\u003Ch4\u003E\n\t\t\t\t\t\t\u003Cspan id=\"Security_Assertion_Markup_Language_SAML_2_0_Profile\" class=\"offset-anchor\" \u003E\u003C\u002Fspan\u003E\n\t\t\t\t\t\t\u003Ca href=\"documentation#Security_Assertion_Markup_Language_SAML_2_0_Profile\" class=\"anchor\" aria-hidden=\"true\"\u003E \u003Ci class=\"las la-link\"\u003E\u003C\u002Fi\u003E \u003C\u002Fa\u003E\n\t\t\t\t\t\tSecurity Assertion Markup Language (SAML) 2.0 Profile\n\t\t\t\t\t\u003C\u002Fh4\u003E\u003Cp\u003E\u003Cstrong\u003ELink to spec.\u003C\u002Fstrong\u003E \u003Ca href=\"https:\u002F\u002Ftools.ietf.org\u002Fhtml\u002Frfc7522\" target=\"_blank\"\u003ESecurity Assertion Markup Language (SAML) 2.0 Profile for OAuth 2.0 Client Authentication and Authorization Grants\u003C\u002Fa\u003E\u003C\u002Fp\u003E\n",metadata:{title:"OpenID Connect 1.0 & OAuth 2.0"},subsections:[{slug:"Endpoints_and_Domains",title:"Endpoints and Domains",level:b},{slug:"OpenID_Connect_1_0_Discovery",title:"OpenID Connect 1.0 Discovery",level:a},{slug:f,title:f,level:a},{slug:g,title:g,level:a},{slug:h,title:h,level:a},{slug:i,title:i,level:a},{slug:j,title:j,level:a},{slug:"OAuth_2_0_Metadata",title:"OAuth 2.0 Metadata",level:a},{slug:k,title:k,level:b},{slug:"Standard_Scopes",title:"Standard Scopes",level:a},{slug:"Custom_Scopes",title:"Custom Scopes",level:a},{slug:"Reserved_Scopes",title:"Reserved Scopes",level:a},{slug:l,title:l,level:b},{slug:"Standard_Claims",title:"Standard Claims",level:a},{slug:"Custom_Claims",title:"Custom Claims",level:a},{slug:"Reserved_Claims",title:"Reserved Claims",level:a},{slug:"Grant_Types",title:"Grant Types",level:b},{slug:"Authorization_Code",title:"Authorization Code",level:a},{slug:"Proof_Key_for_Code_Exchange",title:"Proof Key for Code Exchange",level:a},{slug:m,title:m,level:a},{slug:"Client_Credentials",title:"Client Credentials",level:a},{slug:"Refresh_Token",title:"Refresh Token",level:a},{slug:"JSON_Web_Token_JWT_Profile",title:"JSON Web Token (JWT) Profile",level:a},{slug:"Token_Exchange",title:"Token Exchange",level:a},{slug:"Device_Authorization",title:"Device Authorization",level:b},{slug:"Not_Supported_Grant_Types",title:"Not Supported Grant Types",level:b},{slug:"Resource_Owner_Password_Credentials",title:"Resource Owner Password Credentials",level:a},{slug:"Security_Assertion_Markup_Language_SAML_2_0_Profile",title:"Security Assertion Markup Language (SAML) 2.0 Profile",level:a}],slug:"OpenID_Connect_1_0_and_OAuth_2_0",file:"03-openidoauth.en.md"}],seo:"",slug:"documentation"}}(4,3,"Overview","Principles","Architecture","authorization_endpoint","token_endpoint","userinfo_endpoint","end_session_endpoint","jwks_uri","Scopes","Claims","Implicit"))]};if('serviceWorker' in navigator)navigator.serviceWorker.register('/service-worker.js');(function(){try{eval("async function x(){}");var main="/client/client.5ae4bef9.js"}catch(e){main="/client/legacy/client.372454d7.js"};var s=document.createElement("script");try{new Function("if(0)import('')")();s.src=main;s.type="module";s.crossOrigin="use-credentials";}catch(e){s.src="/client/shimport@2.0.4.js";s.setAttribute("data-main",main);}document.head.appendChild(s);}());</script> 